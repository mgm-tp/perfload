<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Asciidoctor 0.1.4">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>perfLoad Documentation</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }
audio, canvas, video { display: inline-block; }
audio:not([controls]) { display: none; height: 0; }
[hidden] { display: none; }
html { background: #fff; color: #000; font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; }
body { margin: 0; }
a:focus { outline: thin dotted; }
a:active, a:hover { outline: 0; }
h1 { font-size: 2em; margin: 0.67em 0; }
abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
dfn { font-style: italic; }
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }
mark { background: #ff0; color: #000; }
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }
pre { white-space: pre-wrap; }
q { quotes: "\201C" "\201D" "\2018" "\2019"; }
small { font-size: 80%; }
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }
img { border: 0; }
svg:not(:root) { overflow: hidden; }
figure { margin: 0; }
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }
legend { border: 0; padding: 0; }
button, input, select, textarea { font-family: inherit; font-size: 100%; margin: 0; }
button, input { line-height: normal; }
button, select { text-transform: none; }
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; cursor: pointer; }
button[disabled], html input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; }
table { border-collapse: collapse; border-spacing: 0; }
*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
html, body { font-size: 100%; }
body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }
a:hover { cursor: pointer; }
a:focus { outline: none; }
img, object, embed { max-width: 100%; height: auto; }
object, embed { height: 100%; }
img { -ms-interpolation-mode: bicubic; }
#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }
.left { float: left !important; }
.right { float: right !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }
.text-center { text-align: center !important; }
.text-justify { text-align: justify !important; }
.hide { display: none; }
.antialiased, body { -webkit-font-smoothing: antialiased; }
img { display: inline-block; vertical-align: middle; }
textarea { height: auto; min-height: 50px; }
select { width: 100%; }
p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }
.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #7a2518; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }
a { color: #005498; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #00467f; }
a img { border: none; }
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Georgia, "URW Bookman L", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }
h1 { font-size: 2.125em; }
h2 { font-size: 1.6875em; }
h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }
h4 { font-size: 1.125em; }
h5 { font-size: 1.125em; }
h6 { font-size: 1em; }
hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }
em, i { font-style: italic; line-height: inherit; }
strong, b { font-weight: bold; line-height: inherit; }
small { font-size: 60%; line-height: inherit; }
code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #6d180b; }
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }
ul, ol { margin-left: 1.5em; }
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }
abbr { text-transform: none; }
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }
blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }
.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }
@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
.print-only { display: none !important; }
@media print { * { background: transparent !important; color: #000 !important; box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }
.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }
*:not(pre) > code { font-size: 0.9375em; padding: 1px 3px 0; white-space: nowrap; background-color: #f2f2f2; border: 1px solid #cccccc; -webkit-border-radius: 4px; border-radius: 4px; text-shadow: none; }
pre, pre > code { line-height: 1.4; color: inherit; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }
kbd.keyseq { color: #555555; }
kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }
kbd kbd:first-child { margin-left: 0; }
kbd kbd:last-child { margin-right: 0; }
.menuseq, .menu { color: #090909; }
p a > code:hover { color: #561309; }
#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }
#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }
#toc { border-bottom: 3px double #ebebeb; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }
#toctitle { color: #7a2518; }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #ebebeb; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #ebebeb; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }
#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }
#footer-text { color: #dddddd; line-height: 1.44; }
.sect1 { padding-bottom: 1.25em; }
.sect1 + .sect1 { border-top: 3px double #ebebeb; }
#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }
.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }
.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }
.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }
.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }
.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }
.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; line-height: 1.6; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }
.literalblock > .content pre, .listingblock > .content pre { background: none; border-width: 1px 0; border-style: dotted; border-color: #bfbfbf; -webkit-border-radius: 4px; border-radius: 4px; padding: 0.75em 0.75em 0.5em 0.75em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }
.listingblock > .content { position: relative; }
.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }
.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }
.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }
.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }
table.pyhltable { border: 0; margin-bottom: 0; }
table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }
table.pyhltable td.code { padding-left: .75em; padding-right: 0; }
.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }
.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }
table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }
.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }
table thead th, table tfoot th { font-weight: bold; }
table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 4px; border-radius: 4px; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }
table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }
table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }
table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }
th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }
th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }
th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }
th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }
th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }
th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }
p.tableblock.header { color: #222222; font-weight: bold; }
td > div.verse { white-space: pre; }
ol { margin-left: 1.75em; }
ul li ol { margin-left: 1.5em; }
dl dd { margin-left: 1.125em; }
dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }
ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }
ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }
ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }
ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }
ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }
ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }
.unstyled dl dt { font-weight: normal; font-style: normal; }
ol.arabic { list-style-type: decimal; }
ol.decimal { list-style-type: decimal-leading-zero; }
ol.loweralpha { list-style-type: lower-alpha; }
ol.upperalpha { list-style-type: upper-alpha; }
ol.lowerroman { list-style-type: lower-roman; }
ol.upperroman { list-style-type: upper-roman; }
ol.lowergreek { list-style-type: lower-greek; }
.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }
td.hdlist1 { padding-right: .8em; font-weight: bold; }
td.hdlist1, td.hdlist2 { vertical-align: top; }
.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }
.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }
.qanda > ol > li > p > em:only-child { color: #00467f; }
.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }
.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }
a.image { text-decoration: none; }
span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }
.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }
div.unbreakable { page-break-inside: avoid; }
.big { font-size: larger; }
.small { font-size: smaller; }
.underline { text-decoration: underline; }
.overline { text-decoration: overline; }
.line-through { text-decoration: line-through; }
.aqua { color: #00bfbf; }
.aqua-background { background-color: #00fafa; }
.black { color: black; }
.black-background { background-color: black; }
.blue { color: #0000bf; }
.blue-background { background-color: #0000fa; }
.fuchsia { color: #bf00bf; }
.fuchsia-background { background-color: #fa00fa; }
.gray { color: #606060; }
.gray-background { background-color: #7d7d7d; }
.green { color: #006000; }
.green-background { background-color: #007d00; }
.lime { color: #00bf00; }
.lime-background { background-color: #00fa00; }
.maroon { color: #600000; }
.maroon-background { background-color: #7d0000; }
.navy { color: #000060; }
.navy-background { background-color: #00007d; }
.olive { color: #606000; }
.olive-background { background-color: #7d7d00; }
.purple { color: #600060; }
.purple-background { background-color: #7d007d; }
.red { color: #bf0000; }
.red-background { background-color: #fa0000; }
.silver { color: #909090; }
.silver-background { background-color: #bcbcbc; }
.teal { color: #006060; }
.teal-background { background-color: #007d7d; }
.white { color: #bfbfbf; }
.white-background { background-color: #fafafa; }
.yellow { color: #bfbf00; }
.yellow-background { background-color: #fafa00; }
span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }
.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #005498; color: #003f72; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }
.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }
.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 0; border-radius: 0; }

</style>
<style>
/* Foundation stylesheet for CodeRay (to match GitHub theme) | MIT License | http://foundation.zurb.com */
table.CodeRay { border-collapse: collapse; padding: 2px; margin-bottom: 0; border: 0; background: transparent; }
table.CodeRay td { padding: 0 .5em; vertical-align: top; }
table.CodeRay td.line-numbers { text-align: right; color: #999; border-right: 1px solid #e5e5e5; padding-left: 0; }
span.line-numbers { border-right: 1px solid #E5E5E5; color: #999; display: inline-block; margin-right: 0.5em; padding-right: 0.5em; }
.CodeRay td.line-numbers strong, .CodeRay span.line-numbers strong { font-weight: normal; }
.CodeRay .debug { color: white !important; background: blue !important; }
.CodeRay .annotation { color: #007; }
.CodeRay .attribute-name { color: #f08; }
.CodeRay .attribute-value { color: #700; }
.CodeRay .binary { color: #509; }
.CodeRay .comment  { color: #999; font-style: italic; }
.CodeRay .char { color: #04D; }
.CodeRay .char .content { color: #04D; }
.CodeRay .char .delimiter { color: #039; }
.CodeRay .class { color: #458; }
.CodeRay .complex { color: #A08; }
.CodeRay .constant { color: teal; }
.CodeRay .color { color: #0A0; }
.CodeRay .class-variable { color: #369; }
.CodeRay .decorator { color: #B0B; }
.CodeRay .definition { color: #099; }
.CodeRay .directive { color: #088; }
.CodeRay .delimiter { color: black; }
.CodeRay .doc { color: #970; }
.CodeRay .doctype { color: #34b; }
.CodeRay .doc-string { color: #D42; }
.CodeRay .escape  { color: #666; }
.CodeRay .entity { color: #800; }
.CodeRay .error { color: #808; }
.CodeRay .exception { color: #C00; }
.CodeRay .filename { color: #099; }
.CodeRay .function { color: #900; }
.CodeRay .global-variable { color: teal; }
.CodeRay .hex { color: #058; }
.CodeRay .integer  { color: #099; }
.CodeRay .include { color: #B44; }
.CodeRay .inline { color: black; }
.CodeRay .inline .inline { background: #ccc; }
.CodeRay .inline .inline .inline { background: #bbb; }
.CodeRay .inline .inline-delimiter { color: #D14; }
.CodeRay .inline-delimiter { color: #D14; }
.CodeRay .important { color: #f00; }
.CodeRay .interpreted { color: #B2B; }
.CodeRay .instance-variable { color: teal; }
.CodeRay .label { color: #970; }
.CodeRay .local-variable { color: #963; }
.CodeRay .octal { color: #40E; }
.CodeRay .predefined { color: #369; }
.CodeRay .preprocessor { color: #579; }
.CodeRay .pseudo-class { color: #00C; }
.CodeRay .predefined-type { color: #074; }
.CodeRay .reserved, .keyword  { color: #000; }
.CodeRay .key { color: #808; }
.CodeRay .key .delimiter { color: #606; }
.CodeRay .key .char { color: #80f; }
.CodeRay .value { color: #088; }
.CodeRay .regexp { background-color: #fff0ff; }
.CodeRay .regexp .content { color: #808; }
.CodeRay .regexp .delimiter { color: #404; }
.CodeRay .regexp .modifier { color: #C2C; }
.CodeRay .regexp .function  { color: #404; font-weight: bold; }
.CodeRay .string { color: #D20; }
.CodeRay .string .string { }
.CodeRay .string .string .string { background-color: #ffd0d0; }
.CodeRay .string .content { color: #D14; }
.CodeRay .string .char { color: #D14; }
.CodeRay .string .delimiter { color: #D14; }
.CodeRay .shell { color: #D14; }
.CodeRay .shell .content { }
.CodeRay .shell .delimiter { color: #D14; }
.CodeRay .symbol { color: #990073; }
.CodeRay .symbol .content { color: #A60; }
.CodeRay .symbol .delimiter { color: #630; }
.CodeRay .tag, .CodeRay .attribute-name { color: #070; }
.CodeRay .tag-special { color: #D70; }
.CodeRay .type { color: #339; }
.CodeRay .variable  { color: #036; }
.CodeRay .insert { background: #afa; }
.CodeRay .delete { background: #faa; }
.CodeRay .change { color: #aaf; background: #007; }
.CodeRay .head { color: #f8f; background: #505; }
.CodeRay .insert .insert { color: #080; }
.CodeRay .delete .delete { color: #800; }
.CodeRay .change .change { color: #66f; }
.CodeRay .head .head { color: #f4f; }

</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>perfLoad Documentation</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_overview">1. Overview</a></li>
<li><a href="#_getting_started_2">2. Getting Started</a></li>
<li><a href="#_features">3. Features</a></li>
<li><a href="#_components">4. Components</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_console">4.1. Console</a></li>
<li><a href="#_daemon">4.2. Daemon</a></li>
<li><a href="#_client">4.3. Client</a></li>
<li><a href="#_perfmon">4.4. perfMon</a></li>
<li><a href="#_load_profile_editor">4.5. Load Profile Editor</a></li>
<li><a href="#_agent">4.6. Agent</a></li>
<li><a href="#_perfalyzer">4.7. perfAlyzer</a></li>
<li><a href="#_supervisor">4.8. Supervisor</a></li>
</ul>
</li>
<li><a href="#_installation_2">5. Installation</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_installing_daemons_and_clients">5.1. Installing Daemons and Clients</a></li>
<li><a href="#_installing_perfmon">5.2. Installing perfMon</a></li>
<li><a href="#_installing_the_console">5.3. Installing the Console</a></li>
<li><a href="#_installing_the_agent">5.4. Installing the Agent</a></li>
<li><a href="#_installing_the_supervisor">5.5. Installing the Supervisor</a></li>
<li><a href="#_installing_the_load_profile_editor">5.6. Installing the Load Profile Editor</a></li>
</ul>
</li>
<li><a href="#_implementing_load_tests">6. Implementing Load Tests</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_developing_a_load_test_driver">6.1. Developing a Load Test Driver</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_project_setup">6.1.1. Project Setup</a></li>
<li><a href="#_properties">6.1.2. Properties</a></li>
<li><a href="#_request_flows">6.1.3. Request Flows</a></li>
<li>
<ul class="sectlevel4">
<li><a href="#_parameterization_of_requests">Parameterization of Requests</a></li>
<li><a href="#_extracting_details_from_responses">Extracting Details from Responses</a></li>
<li>
<ul class="sectlevel5">
<li><a href="#_response_body_extraction">Response Body Extraction</a></li>
<li><a href="#_response_header_extraction">Response Header Extraction</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_validating_responses">6.1.4. Validating Responses</a></li>
<li>
<ul class="sectlevel4">
<li><a href="#_checking_http_status_codes">Checking HTTP Status Codes</a></li>
<li><a href="#_checking_the_response_body">Checking the Response Body</a></li>
</ul>
</li>
<li><a href="#_test_modules">6.1.5. Test Modules</a></li>
<li><a href="#_scoping">6.1.6. Scoping</a></li>
<li><a href="#_events">6.1.7. Events</a></li>
<li><a href="#_waiting_times">6.1.8. Waiting Times</a></li>
<li><a href="#_custom_request_handlers">6.1.9. Custom Request Handlers</a></li>
<li><a href="#_using_the_script_driver">6.1.10. Using the Script Driver</a></li>
<li><a href="#_creating_a_custom_driver">6.1.11. Creating a Custom Driver</a></li>
</ul>
</li>
<li><a href="#_creating_a_load_profile">6.2. Creating a Load Profile</a></li>
<li><a href="#_creating_a_testplan">6.3. Creating a Testplan</a></li>
<li><a href="#_a_complete_example">6.4. A Complete Example</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_the_driver_code">6.4.1. The Driver Code</a></li>
<li><a href="#_the_request_flow">6.4.2. The Request Flow</a></li>
<li><a href="#_the_testplan">6.4.3. The Testplan</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_analyzing_perfalyzer_reports">7. Analyzing perfalyzer Reports</a></li>
<li><a href="#_downloads">8. Downloads</a></li>
<li><a href="#_tips_and_tricks_for_load_testing">9. Tips and Tricks for Load Testing</a></li>
<li><a href="#_community">10. Community</a></li>
<li><a href="#_need_help">11. Need Help?</a></li>
<li><a href="#_found_a_bug">12. Found a Bug?</a></li>
<li><a href="#_want_to_get_involved">13. Want to Get Involved?</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="images/perfLoad_Logo_wort2.png" alt="perfLoad Logo" title="perfLoad Logo"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="link" href="#_overview">1. Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>perfLoad offers powerful whitebox testing features to analyze not only
client-side response times but also allows the user to capture
server-side execution times and to monitor system metrics on all
participating hosts. In addition, it provides the complete picture as an
easy to read HTML report containing a sophisticated visual analysis of
the measurings.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/perfLoad_overview_800x600.png" alt="perfLoad Overview" title="perfLoad Overview"></span></p>
</div>
<h3 id="_main_features" class="discrete">Main Features</h3>
<div class="ulist">
<ul>
<li>
<p>Whitebox load and performance testing including client- and server-side measurings and system metrics</p>
</li>
<li>
<p>Support for complex load profiles including a visual editor</p>
</li>
<li>
<p>Full HTTP support</p>
</li>
<li>
<p>Support for custom request types</p>
</li>
<li>
<p>Load test driver development in Java</p>
</li>
<li>
<p>Central control</p>
</li>
<li>
<p>Full-featured reporting</p>
</li>
<li>
<p><a href="#_features">More&#8230;</a></p>
</li>
</ul>
</div>
<h3 id="_getting_started" class="discrete">Getting Started</h3>
<div class="paragraph">
<p>For a quick start, a complete <a href="#_getting_started_2">demo setup</a> is
available which installs all perfLoad components and a reference
application on your local machine. This should get you started quickly
in a matter of minutes and help you set up real-world testing scenarios
for your applications.</p>
</div>
<h3 id="_read_on" class="discrete">Read on&#8230;</h3>
<div class="ulist">
<ul>
<li>
<p><a href="#_getting_started_2">Getting Started</a> - Get up and running quickly using the demo setup.</p>
</li>
<li>
<p><a href="#_features">Complete Feature List</a> - Find out all about perfLoad&#8217;s amazing features.</p>
</li>
<li>
<p><a href="#_components">Components</a> - Get to know perfLoad&#8217;s components.</p>
</li>
<li>
<p><a href="#_installation">Installation</a> - Learn how to set up and configure everything for real-world scenarios.</p>
</li>
<li>
<p><a href="#_implementing_load_tests">Implementing Load Tests</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#_developing_a_load_test_driver">Developing a Load Test Driver</a></p>
</li>
<li>
<p><a href="#_creating_a_load_profile">Creating a Load Profile</a></p>
</li>
<li>
<p><a href="#_creating_a_testplan">Creating a Testplan</a></p>
</li>
<li>
<p><a href="#_a_complete_example">A Complete Example</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#_analyzing_perfalyzer_reports">Analyzing perfAlyzer Reports</a> - Learn about reporting features and how to interpret reports.</p>
</li>
<li>
<p><a href="#_downloads">Downloads</a></p>
</li>
<li>
<p><a href="#_tips_and_tricks_for_load_testing">Tips and Tricks for Load Testing</a></p>
</li>
<li>
<p><a href="#_community">Community</a> - Need help? Want to get involved?</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started_2"><a class="link" href="#_getting_started_2">2. Getting Started</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to get started quickly with perfLoad and to demonstrate how everything works together, a demo setup is available that installs a complete perfLoad environment including all components together with a reference application on your local machine.</p>
</div>
<div class="paragraph">
<p>It includes a sample load test driver and several sample testplans which you may run and study in order to get familiar with perfLoad.</p>
</div>
<h3 id="_installation" class="discrete">Installation</h3>
<div class="ulist">
<ul>
<li>
<p>Make sure <code>JAVA_HOME</code> is set to Java 7 (JDK or JRE).</p>
</li>
<li>
<p>Download (link will follow once published) the demo installer and unzip it to some directory of your choice. You will find there a directory named <code>demo-installer</code>.</p>
</li>
<li>
<p>Open a command prompt in this directory and run <code>DemoInstaller.cmd</code> or <code>./DemoInstaller</code>, depending on your operating system. The installer will then download and configure all components. You will be prompted for the demo installation directory. You may accept the default or enter a directory of you choice.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">demo-installer&gt; DemoInstaller.cmd
Initializing...

        *******************************************************************
        *                                                                 *
        *                                                                 *
        *           Welcome to perfLoad's Demo Installer 1.0.0            *
        *             (c) 2013, mgm technology partners GmbH              *
        *                                                                 *
        *                                                                 *
        *******************************************************************

 &gt; Enter installation directory [../perfload-demo]:</code></pre>
</div>
</div>
<h3 id="_running_sample_load_tests" class="discrete">Running Sample Load Tests</h3>
<div class="ulist">
<ul>
<li>
<p>Open a command prompt in the directory <code>supervisor</code> in the directory where the demo was installed.</p>
</li>
<li>
<p>Execute <code>runLoadTest.cmd</code> or <code>./runLoadTest</code>.</p>
</li>
<li>
<p>You will be prompted for a testplan to run:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">perfload-demo\supervisor&gt; runLoadTest.cmd
Initializing...

        *******************************************************************
        *                                                                 *
        *                                                                 *
        *             Welcome to perfLoad's Supervisor 1.9.1              *
        *             (c) 2013, mgm technology partners GmbH              *
        *                                                                 *
        *                                                                 *
        *******************************************************************

No tentant specified. Running in single-tenancy mode.

Please select the testplan you'd like to use:
  1) testplan_browse_error.xml
  2) testplan_browse_garbage.xml
  3) testplan_CPUload.xml
  4) testplan_garbage.xml
  5) testplan_long.xml
  6) testplan_persistent_garbage.xml
  7) testplan_short.xml</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>You may execute any of these testplans. For a start, we&#8217;d recommand to select <code>testplan_short</code>. It runs about ten minutes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>That&#8217;s it! Supervisor takes care of everything including startup and shutdown of the reference application.</p>
</div>
<h3 id="_examining_the_test_results" class="discrete">Examining the Test Results</h3>
<div class="paragraph">
<p>After successfully completing the test, perfAlyzer is launched creating a report, which is stored under <code>perfalyzer\output\&lt;testplan&gt;\&lt;timestamp&gt;\05_report\report.html</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_features"><a class="link" href="#_features">3. Features</a></h2>
<div class="sectionbody">
<h3 id="_whitebox_testing_options" class="discrete">Whitebox Testing Options</h3>
<div class="ulist">
<ul>
<li>
<p>Measuring client-side response times</p>
</li>
<li>
<p>Measuring server-side execution times of specific Java methods using perfLoad Agent</p>
</li>
<li>
<p>Capturing system metrics, such as CPU, IO, memory, network, etc. using perfMon</p>
</li>
</ul>
</div>
<h3 id="_central_control_with_perfload_supervisor" class="discrete">Central Control with perfLoad Supervisor</h3>
<div class="ulist">
<ul>
<li>
<p>Load test execution control</p>
</li>
<li>
<p>SSH communication with participating hosts</p>
</li>
<li>
<p>Data collection using SCP</p>
</li>
<li>
<p>Hooks for custom scripting, e. g. for starting up or shutting down the system under test.</p>
</li>
</ul>
</div>
<h3 id="_load_test_driver_options" class="discrete">Load Test Driver Options</h3>
<div class="ulist">
<ul>
<li>
<p>Load test driver development in Java with support for JSR 330 dependency injection</p>
</li>
<li>
<p>Support for all HTTP methods and thus for any kind of HTTP requests (SOAP, REST, AJAX)</p>
</li>
<li>
<p>Support for custom "request types" (e. g. for calling Java Applet code, calling shell scripts, etc.)</p>
</li>
<li>
<p>Configurable waiting times between requests</p>
</li>
<li>
<p>Fully parameterizable request flows</p>
</li>
<li>
<p>Tests driven by load profiles making client load exactly follow predefined curves</p>
</li>
<li>
<p>Combination of different request flows into a single load profile</p>
</li>
<li>
<p>Orchestration of load profile executions across multiple client hosts/processes</p>
</li>
<li>
<p>Support for extraction of response headers and details from responses</p>
</li>
<li>
<p>Support for validation of response content and status codes</p>
</li>
</ul>
</div>
<h3 id="_visual_creation_of_load_profiles_with_perfload_load_profile_editor" class="discrete">Visual Creation of Load Profiles with perfLoad Load Profile Editor</h3>
<h3 id="_evaluation_and_reporting_with_perfalyzer" class="discrete">Evaluation and Reporting with perfAlyzer</h3>
<div class="ulist">
<ul>
<li>
<p>Full-featured reports including client- and server-side measurements, percentile calculation, response time distribution, system metrics, garbage collection, test history, etc.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_components"><a class="link" href="#_components">4. Components</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>perfLoad consists of a number of components which are explained below.</p>
</div>
<div class="sect2">
<h3 id="_console"><a class="link" href="#_console">4.1. Console</a></h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:10%;">
<col style="width:90%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/console.png" alt="Console"></span></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">The console controls load test execution. It distributes testplans, load profiles, and driver jars to the daemons and runs the test.</p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="_daemon"><a class="link" href="#_daemon">4.2. Daemon</a></h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:10%;">
<col style="width:90%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/daemon.png" alt="daemon"></span></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">A daemon is little server between the console and the clients. A daemon spawns the client processes that execute the load test driver.</p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="_client"><a class="link" href="#_client">4.3. Client</a></h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:10%;">
<col style="width:90%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/client.png" alt="client"></span></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">A client process executes the load test driver. Each event in a load profile triggers a new client thread at the specified time executing the operation specified by the load profile event.</p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="_perfmon"><a class="link" href="#_perfmon">4.4. perfMon</a></h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:10%;">
<col style="width:90%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/perfMon.png" alt="perfMon"></span></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">The monitoring tool perfMon should be installed on all participating hosts. It captures system metrics, such as CPU, memory, IO, network, etc. and writes them to a file.</p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="_load_profile_editor"><a class="link" href="#_load_profile_editor">4.5. Load Profile Editor</a></h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:10%;">
<col style="width:90%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/load_profile_editor.png" alt="load_profile_editor"></span></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">A Swing application for visually creating load profiles.</p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="_agent"><a class="link" href="#_agent">4.6. Agent</a></h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:10%;">
<col style="width:90%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/agent.png" alt="agent"></span></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">The perfLoad Agent is a Java agent which instruments the byte code in order to weave in measuring hooks. This solution is much more elegant than AOP because it does no require the development of project-specific aspects. The agent only requires a config file in JSON format in order to define methods that should be instrumented. The agent also captures exceptions that occur in instrumented methods.</p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="_perfalyzer"><a class="link" href="#_perfalyzer">4.7. perfAlyzer</a></h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:10%;">
<col style="width:90%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/perfAlyzer.png" alt="perfAlyzer"></span></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Reporting solution that runs out-of-the-box with zero or little extra configuration. Creates full-featured HTML reports including client- and server-side measurings, percentile calculation, response time distribution, system metrics, garbage collection, test history, etc.</p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="_supervisor"><a class="link" href="#_supervisor">4.8. Supervisor</a></h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:10%;">
<col style="width:90%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="images/supervisor.png" alt="supervisor"></span></p></td>
<td class="tableblock halign-left valign-middle"><div><div class="paragraph">
<p>A Gradle script and a few Groovy classes for controlling everything:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Clean up environment</p>
</li>
<li>
<p>Start up participating systems if required (e. g. application servers)</p>
</li>
<li>
<p>Start perfMons</p>
</li>
<li>
<p>Start daemons</p>
</li>
<li>
<p>Run test</p>
</li>
<li>
<p>Shut down daemons</p>
</li>
<li>
<p>Shut down perfMons</p>
</li>
<li>
<p>Shut down participating systems</p>
</li>
<li>
<p>Collect test results</p>
</li>
<li>
<p>Run report generation</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation_2"><a class="link" href="#_installation_2">5. Installation</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The various perfLoad components need to be installed on the participating hosts. All components must be installed under a common directory on each host, which will subsequently be referred to as <code>PERFLOAD_HOME</code>. An environment variable with this name is, however, not necessary.</p>
</div>
<hr>
<div class="paragraph">
<p><strong><em>A Note up front</em></strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Installing the components always involves unzipping a distribution. It is advisable to unzip the distributions directly on the target systems. This avoids file corruption during SCP transfer of unzipped distributions (e. g. *.dll and \*.so file in perfMon) and creates execute permissions for shell scripts automatically.</em></p>
</li>
<li>
<p><em>It is always safe to unzip a newer version over an existing installation. All files that require user changes have <code>.default</code> in their names and must be renamed upon installation. So you can always diff your adapted config files with the default ones after an update and make necessary adjustments, if need be.</em></p>
</li>
</ul>
</div>
<hr>
<div class="sect2">
<h3 id="_installing_daemons_and_clients"><a class="link" href="#_installing_daemons_and_clients">5.1. Installing Daemons and Clients</a></h3>
<div class="ulist">
<ul>
<li>
<p>Requires Java 7</p>
</li>
<li>
<p>Unzip the perfLoad Client distribution to <code>PERFLOAD_HOME</code> on all client hosts.</p>
</li>
<li>
<p>Unzip the perfLoad Daemon distribution to <code>PERFLOAD_HOME</code> on all client hosts.</p>
</li>
<li>
<p><code>JAVA_HOME</code> must be set to a <strong>Java 7</strong> (JDK or JRE). A <code>setenv.cmd</code> / <code>setenv.sh</code> may be added to the daemon directory in order to set <code>JAVA_HOME</code>. It will be picked up if present.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_installing_perfmon"><a class="link" href="#_installing_perfmon">5.2. Installing perfMon</a></h3>
<div class="ulist">
<ul>
<li>
<p>Requires Java 6</p>
</li>
<li>
<p>Unzip the perfMon distribution to <code>PERFLOAD_HOME</code> on all hosts where you wish to run perfMon during load tests.</p>
</li>
<li>
<p><code>JAVA_HOME</code> must be set to a <strong>Java 6</strong> or higher (JDK or JRE). A <code>setenv.cmd</code> / <code>setenv.sh</code> may be added to the daemon directory in order to set <code>JAVA_HOME</code>. It will be picked up if present.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_installing_the_console"><a class="link" href="#_installing_the_console">5.3. Installing the Console</a></h3>
<div class="ulist">
<ul>
<li>
<p>Requires Java 7</p>
</li>
<li>
<p>Unzip the perfLoad Console distribution to <code>PERFLOAD_HOME</code> on the controller host.</p>
</li>
<li>
<p><code>JAVA_HOME</code> must be set to a <strong>Java 7</strong> (JDK or JRE). A <code>setenv.cmd</code> / <code>setenv.sh</code> may be added to the daemon directory in order to set <code>JAVA_HOME</code>. It will be picked up if present.</p>
</li>
<li>
<p>Copy the driver jar and any additional dependencies to the folder <code>test-lib</code>.</p>
</li>
<li>
<p>Copy testplan files to the folder <code>testplans</code>.</p>
</li>
<li>
<p>Copy load profile events files to the folder <code>testplans/loadprofiles</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_installing_the_agent"><a class="link" href="#_installing_the_agent">5.4. Installing the Agent</a></h3>
<div class="ulist">
<ul>
<li>
<p>Requires Java 6</p>
</li>
<li>
<p>Unzip the perfLoad Agent distribution to <code>PERFLOAD_HOME</code> on the application server hosts.</p>
</li>
<li>
<p>Rename <code>perfload-agent.default.json</code> to <code>perfload-agent.json</code> and edit it as specified below.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each method to be measured, add a JSON object to the file, the key being the fully classified class name of the class that contains methods to measure. Each class name JSON object must in turn contain any number of JSON objects for methods to measure, the keys being the method names and the values being lists of JSON arrays with method parameters. Specifying method parameters allows to distinguish between overloaded methods. If an empty list is specified, any, potentially overloaded, method with the name of the key is instrumented.</p>
</div>
<div class="paragraph">
<p>The agent can also instrument entry points of Web applications, i. e. servlets or filter. This enables the agent to match client requests and server-side measurings because perfLoad sends custom HTTP headers which the agent can extract. If your application has multiple entry points (e. g. multiple filters that are chained), only the first entry point relevant for a request should be instrumented. It is suggested the entry points be always configured.</p>
</div>
<div class="paragraph">
<p><strong>Sample for an agent config file</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="javascript language-javascript">{
    <span class="key"><span class="delimiter">'</span><span class="content">entryPoints</span><span class="delimiter">'</span></span>: {
        <span class="key"><span class="delimiter">'</span><span class="content">servlets</span><span class="delimiter">'</span></span>: [<span class="string"><span class="delimiter">'</span><span class="content">com.foo.web.FooServlet</span><span class="delimiter">'</span></span>],
        <span class="key"><span class="delimiter">'</span><span class="content">filters</span><span class="delimiter">'</span></span>: [<span class="string"><span class="delimiter">'</span><span class="content">com.foo.web.FooFilter</span><span class="delimiter">'</span></span>]
    },
    <span class="key"><span class="delimiter">'</span><span class="content">instrumentations</span><span class="delimiter">'</span></span>: {
        <span class="key"><span class="delimiter">'</span><span class="content">com.foo.web.Foo</span><span class="delimiter">'</span></span>: {
            <span class="key"><span class="delimiter">'</span><span class="content">doSomething</span><span class="delimiter">'</span></span>: [[], [<span class="string"><span class="delimiter">'</span><span class="content">int</span><span class="delimiter">'</span></span>], [<span class="string"><span class="delimiter">'</span><span class="content">long</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">long</span><span class="delimiter">'</span></span>]],
            <span class="key"><span class="delimiter">'</span><span class="content">doSomethingElse</span><span class="delimiter">'</span></span>: []
        },
        <span class="key"><span class="delimiter">'</span><span class="content">com.foo.web.Bar</span><span class="delimiter">'</span></span>: {
            <span class="key"><span class="delimiter">'</span><span class="content">doIt</span><span class="delimiter">'</span></span>: [[java.lang.Integer]],
            <span class="key"><span class="delimiter">'</span><span class="content">doItAgain</span><span class="delimiter">'</span></span>: []
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to activate the agent in your application server, add the following VM-Parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">-javaagent:/path/to/agent/perfload-agent.jar</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installing_the_supervisor"><a class="link" href="#_installing_the_supervisor">5.5. Installing the Supervisor</a></h3>
<div class="ulist">
<ul>
<li>
<p>Requires Java 7</p>
</li>
<li>
<p>Unzip the perfLoad Supervisor distribution to <code>PERFLOAD_HOME</code> on the controller host. Note, the Supervisor must be installed on the same host as the Console.</p>
</li>
<li>
<p><code>JAVA_HOME</code> must be set to a <strong>Java 7</strong> (JDK or JRE). A <code>setenv.cmd</code> / <code>setenv.sh</code> may be added to the daemon directory in order to set <code>JAVA_HOME</code>. It will be picked up if present.</p>
</li>
<li>
<p>Rename all files in directory <code>conf</code> matching the pattern <code><strong>.default.</strong></code> by removing ".default" from the file name.</p>
</li>
<li>
<p>Edit the config files in the folder <code>conf</code> as described below.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Editing <code>SupervisorConfig.groovy</code></strong></p>
</div>
<div class="paragraph">
<p>The file <code>SupervisorConfig.groovy</code> contains settings for the Supervisor that are not specific to load tests. The file is in a format that can be read by Groovy&#8217;s [ConfigSlurper](<a href="http://groovy.codehaus.org/ConfigSlurper">http://groovy.codehaus.org/ConfigSlurper</a>). The following table lists all properties for this file. Note that, unlike Java properties, the values are real types, not just strings.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:40%;">
<col style="width:45%;">
<col style="width:15%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loadProfileTestTimeout</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The timeout in minutes that the console will wait after the last test thread was started before aborting the test. Set to <code>0</code> for no timeout.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>long</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cleanupBeforeTest</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Specifies whether the Supervisor should perform a clean-up (e. g. delete old log files) before executing a load test. This should normally be set to <code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startServersBeforeTest</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Specifies whether the Supervisor should start configured servers before executing a load test.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shutdownServersAfterTest</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Specifies whether the Supervisor should shutdown configured servers after executing a load test.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectResults</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Specifies whether the Supervisor should collect test results after executing a load test.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>runProjectSpecificTargets</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Specifies whether the Supervisor should run project specific targets before and after a load test.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>createReport</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Automatically runs perfAlyzer after the test</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requireTestComment</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>If <code>true</code>, the Supervisor prompts for a comment before a test is started. This comment will show up in the report.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Editing <code>LoadTestConfig.groovy</code></strong></p>
</div>
<div class="paragraph">
<p>The file <code>LoadTestConfig.groovy</code> contains configurations for all hosts participating in load tests. The file is in a format that can be read by Groovy&#8217;s [ConfigSlurper](<a href="http://groovy.codehaus.org/ConfigSlurper">http://groovy.codehaus.org/ConfigSlurper</a>). The following table lists the properties for this file. Note that, unlike Java properties, the values are real types, not just strings. As the configuration is structured as nested maps, the table also shows parent-child relationships.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:30%;">
<col style="width:30%;">
<col style="width:30%;">
<col style="width:10%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Parent</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostConfigs</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Root for host configurations.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someHostName&shy;OrIp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostConfigs</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A map representing a specific host configuration.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>user</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someHostName&shy;OrIp</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The username for SSH access.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>password</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someHostName&shy;OrIp</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The password for SSH access (optional).</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pemFile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someHostName&shy;OrIp</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The certificate for public key authentication (optional).</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>perfLoadHome</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someHostName&shy;OrIp</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The base directory for all perfLoad components on this host.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>osfamily</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someHostName&shy;OrIp</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The OS family of this host.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>daemonId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someHostName&shy;OrIp</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional parameter that be set if this is a client host that runs perfLoad daemons and client processes. Specifies the id of a daemon as configured in the load profile.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>perfmon</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someHostName&shy;OrIp</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Optional parameter that must be <code>true</code> if perfMon is installed on this host, which should usually be the case on all participating hosts.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>startup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someHostName&shy;OrIp</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A list of SSH commands that should be executed on this host before a load test, e. g. to start up application servers.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>shutdown</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someHostName&shy;OrIp</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A list of SSH commands that should be executed on this host after a load test, e. g. to shut down application servers.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>List</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>archiving</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someHostName&shy;OrIp</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A map of archiving configurations that specify what files perfLoad should zip up and collect after a load test.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someArchiving&shy;ConfigName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>archiving</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A map representing a specific archiving configuration.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dir</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someArchiving&shy;ConfigName</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The directory that contains files to be archived.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>files</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someArchiving&shy;ConfigName</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A wildcard pattern matching files to be archived.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zipName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someArchiving&shy;ConfigName</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The name of the zip file to create.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cleanup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>someArchiving&shy;ConfigName</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Specifiey whether the files (including the zip file) should be deleted before a test if they exist. May be left out otherwise.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The following example should make this clearer:</p>
</div>
<div class="paragraph">
<p><strong>Example for LoadTestConfig.groovy</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy">    hostConfigs {
        myClientHost1 {
            user = <span class="string"><span class="delimiter">'</span><span class="content">myuser</span><span class="delimiter">'</span></span>
            password = <span class="string"><span class="delimiter">'</span><span class="content">mypass</span><span class="delimiter">'</span></span>
            perfLoadHome = <span class="string"><span class="delimiter">'</span><span class="content">/home/myuser/perfload</span><span class="delimiter">'</span></span>
            osfamily = <span class="string"><span class="delimiter">'</span><span class="content">unix</span><span class="delimiter">'</span></span>
            daemonId = <span class="integer">1</span>
            perfmon = <span class="predefined-constant">true</span>
        }
        myClientHost2 {
            user = <span class="string"><span class="delimiter">'</span><span class="content">myuser</span><span class="delimiter">'</span></span>
            password = <span class="string"><span class="delimiter">'</span><span class="content">mypass</span><span class="delimiter">'</span></span>
            perfLoadHome = <span class="string"><span class="delimiter">'</span><span class="content">/home/myuser/perfload</span><span class="delimiter">'</span></span>
            osfamily = <span class="string"><span class="delimiter">'</span><span class="content">unix</span><span class="delimiter">'</span></span>
            daemonId = <span class="integer">2</span>
            perfmon = <span class="predefined-constant">true</span>
        }
        myAppServerHost1 {
            user = <span class="string"><span class="delimiter">'</span><span class="content">myuser</span><span class="delimiter">'</span></span>
            password = <span class="string"><span class="delimiter">'</span><span class="content">mypass</span><span class="delimiter">'</span></span>
            perfLoadHome = <span class="string"><span class="delimiter">'</span><span class="content">/home/myuser/perfload</span><span class="delimiter">'</span></span>
            osfamily = <span class="string"><span class="delimiter">'</span><span class="content">unix</span><span class="delimiter">'</span></span>
            perfmon = <span class="predefined-constant">true</span>
            startup = [[<span class="key">dir</span>: <span class="string"><span class="delimiter">'</span><span class="content">/dir/to/appserver/bin</span><span class="delimiter">'</span></span>, <span class="key">executable</span>: <span class="string"><span class="delimiter">'</span><span class="content">./myapp.sh</span><span class="delimiter">'</span></span>], <span class="key">args</span>: [<span class="string"><span class="delimiter">'</span><span class="content">start</span><span class="delimiter">'</span></span>]]
            shutdown = [[<span class="key">dir</span>: <span class="string"><span class="delimiter">'</span><span class="content">/dir/to/appserver/bin</span><span class="delimiter">'</span></span>, <span class="key">executable</span>: <span class="string"><span class="delimiter">'</span><span class="content">./myapp.sh</span><span class="delimiter">'</span></span>, <span class="key">args</span>: [<span class="string"><span class="delimiter">'</span><span class="content">shutdown</span><span class="delimiter">'</span></span>]]
            archiving {
                appServerLogs {
                    dir = <span class="string"><span class="delimiter">'</span><span class="content">/dir/to/appserver/logs</span><span class="delimiter">'</span></span>
                    files = <span class="string"><span class="delimiter">'</span><span class="content">*.log</span><span class="delimiter">'</span></span>
                    zipName = <span class="string"><span class="delimiter">'</span><span class="content">appserver-logs.zip</span><span class="delimiter">'</span></span>
                    cleanup = <span class="predefined-constant">true</span>
                }
            }
        }
        myAppServerHost2 {
            user = <span class="string"><span class="delimiter">'</span><span class="content">myuser</span><span class="delimiter">'</span></span>
            password = <span class="string"><span class="delimiter">'</span><span class="content">mypass</span><span class="delimiter">'</span></span>
            perfLoadHome = <span class="string"><span class="delimiter">'</span><span class="content">/home/myuser/perfload</span><span class="delimiter">'</span></span>
            osfamily = <span class="string"><span class="delimiter">'</span><span class="content">unix</span><span class="delimiter">'</span></span>
            perfmon = <span class="predefined-constant">true</span>
            startup = [[<span class="key">dir</span>: <span class="string"><span class="delimiter">'</span><span class="content">/dir/to/appserver/bin</span><span class="delimiter">'</span></span>, <span class="key">executable</span>: <span class="string"><span class="delimiter">'</span><span class="content">./startup.sh</span><span class="delimiter">'</span></span>]]
            shutdown = [[<span class="key">dir</span>: <span class="string"><span class="delimiter">'</span><span class="content">/dir/to/appserver/bin</span><span class="delimiter">'</span></span>, <span class="key">executable</span>: <span class="string"><span class="delimiter">'</span><span class="content">./shutdown.sh</span><span class="delimiter">'</span></span>]]
            archiving {
                appServerLogs {
                    dir = <span class="string"><span class="delimiter">'</span><span class="content">/dir/to/appserver/logs</span><span class="delimiter">'</span></span>
                    files = <span class="string"><span class="delimiter">'</span><span class="content">*.log</span><span class="delimiter">'</span></span>
                    zipName = <span class="string"><span class="delimiter">'</span><span class="content">appserver-logs.zip</span><span class="delimiter">'</span></span>
                    cleanup = <span class="predefined-constant">true</span>
                }
            }
        }
        myDbHost {
            user = <span class="string"><span class="delimiter">'</span><span class="content">myuser</span><span class="delimiter">'</span></span>
            password = <span class="string"><span class="delimiter">'</span><span class="content">mypass</span><span class="delimiter">'</span></span>
            perfLoadHome = <span class="string"><span class="delimiter">'</span><span class="content">/home/myuser/perfload</span><span class="delimiter">'</span></span>
            osfamily = <span class="string"><span class="delimiter">'</span><span class="content">unix</span><span class="delimiter">'</span></span>
            perfmon = <span class="predefined-constant">true</span>
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Adding project-specific targets</strong></p>
</div>
<div class="paragraph">
<p>The Supervisor can execute project-specific tasks before and after a load test. The file <code>ProjectTargets.gradle</code> must be placed in the Supervisor&#8217;s installation directory. It must contain the tasks <code>before</code>, <code>after</code>, and <code>performSystemCheck</code>. The latter one can be used to check the availability of the system, e. g. by calling a URL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="groovy language-groovy"><span class="comment">// custom config object, if necessary</span>
<span class="comment">// myProjectConfig = SupervisorUtils.loadConfig(tenant, 'ProjectTasksconfig.groovy')</span>

task before(<span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">Executes project-specific tasks before the load test</span><span class="delimiter">'</span></span>) &lt;&lt; {

}

task after(<span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">Executes project-specific tasks after the load test</span><span class="delimiter">'</span></span>) &lt;&lt; {

}

task performSystemCheck(<span class="key">description</span>: <span class="string"><span class="delimiter">'</span><span class="content">Checks that everything is up and running</span><span class="delimiter">'</span></span>) &lt;&lt; {
    <span class="comment">/*
     * In order to fail this task, e. g. ant.fail() may be called
     */</span>
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
An upcoming version of the Supervisor will be able to distribute all components to the participating hosts so that everything can be configured in one central place and then be installed automatically.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_installing_the_load_profile_editor"><a class="link" href="#_installing_the_load_profile_editor">5.6. Installing the Load Profile Editor</a></h3>
<div class="ulist">
<ul>
<li>
<p>Requires Java 7</p>
</li>
<li>
<p>Unzip the perfLoad Load Profile Editor distribution to <code>PERFLOAD_HOME</code> on the controller host.</p>
</li>
<li>
<p><code>JAVA_HOME</code> must be set to a <strong>Java 7</strong> (JDK or JRE). A <code>setenv.cmd</code> / <code>setenv.sh</code> may be added to the daemon directory in order to set <code>JAVA_HOME</code>. It will be picked up if present.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementing_load_tests"><a class="link" href="#_implementing_load_tests">6. Implementing Load Tests</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>A typical perfLoad set up contains several <code>perfLoad Daemons</code> that run on participating client hosts. A daemon acts as a server between the <code>perfLoad Console</code> and the actual <code>perfLoad Client</code> processes. There is always one daemon per client host. Each daemon triggers client processes on the same machine which in turn spawn threads that execute the load test driver.</p>
</div>
<h4 id="_definition_of_terms" class="discrete">Definition of Terms</h4>
<div class="paragraph">
<p>Before getting into the details, the following table defines a few key terms that are necessary to understand perfLoad.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:20%;">
<col style="width:80%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Load Test Driver</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The piece of software that is executed during a load test. It acts as a client to the system under test. A load test driver can be customized by load test implementers.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Operation</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>perfLoad usually executes multiple client threads per client process. Each client thread executes the load test driver. The <code>operation</code> is an identifier that tells the driver what is should do at runtime, e. g. execute a certain request flow with certain test data. It is up to the driver implementation to interpret the <code>operation</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Target</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>operation</code> and <code>target</code> always go together. Each client thread is also associated with a <code>target</code>. The system under test may contain multiple application servers. Each <code>target</code> stands for one application server. In most cases, there will only be one <code>target</code>. In case of a cluster environment, a load balancer is usually used. However, it is very well possible to access multiple application servers directly using multiple <code>targets</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Request Flow</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>perfLoad Web tests always execute a list of predefined requests. A request flow is an XML file that contains a list of such predefined request templates. Request flows may be fully parameterized. At runtime request templates are transformed into executable requests.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Load Profile</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The load profile, which may be created using perfLoad&#8217;s <code>Load Profile Editor</code>, is a text file which lists all load test driver executions during a test. In fact, it specifies exactly which <code>operation</code> to execute against which <code>target</code> on which <code>daemon</code> by which <code>process</code> at what time relative to the test start.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Testplan</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The testplan is a little XML file which tells perfLoad which load profile to execute, specifies load test driver jar files to distribute to the clients, and allows to set additional properties for the test.</p>
</div></div></td>
</tr>
</tbody>
</table>

<h4 id="_perfload_client_internals" class="discrete">perfLoad Client Internals</h4>
<div class="paragraph">
<p>perfLoad is not limited to Web load tests. Anything can be implemented. So, in the following, we&#8217;ll see how perfLoad clients work in general. Later on, we&#8217;ll look at how Web load tests are implemented.</p>
</div>
<h5 id="_load_tests_in_general" class="discrete">Load Tests in General</h5>
<div class="paragraph">
<p>The following sequence diagram shows the basic scenario, which is common to all load tests.</p>
</div>
<div class="paragraph">
<p>image:sequence-diagram_test-driver.png</p>
</div>
<div class="paragraph">
<p>The subsequent sections describe the involved classes in detail.</p>
</div>
<h6 id="_class_code_com_mgmtp_perfload_core_client_ltprocess_code" class="discrete">Class <code>com.mgmtp.perfload.core.client.LtProcess</code></h6>
<div class="paragraph">
<p>The class <code>com.mgmtp.perfload.core.client.LtProcess</code> is the main entry point for a load test client process. It submits <code>com.mgmtp.perfload.core.client.LtRunner</code> implementations to an <code>ExecutorService</code>, which is actually responsible for creating test threads. Events are triggered on process start and finish. Implementers can react on these events for initialization and clean-up tasks (e. g. shutdown of connection pools common to all threads).</p>
</div>
<h6 id="_class_code_com_mgmtp_perfload_core_client_util_concurrent_delayingexecutorservice_code" class="discrete">Class <code>com.mgmtp.perfload.core.client.util.concurrent.DelayingExecutorService</code></h6>
<div class="paragraph">
<p>This class extends <code>java.util.concurrent.AbstractExecutorService</code>. It allows tasks to be executed after a given delay. This is necessary for load profile execution. Internally, it maintains a completion queue, so finished tasks may be taken out of this queue as soon as they are done. This allows for a quick reaction on possible execution errors so that, depending on the type of exception, tests can be aborted early. The size of the thread pool is not limited because the number of threads needed for load profile execution is not available ahead of time. However, idle threads may die when they are not needed anymore. Warnings are logged if tasks are executed too late because of performance problems in the client process due to very high load.</p>
</div>
<h6 id="_class_code_com_mgmtp_perfload_core_client_runner_ltrunner_code" class="discrete">Class <code>com.mgmtp.perfload.core.client.runner.LtRunner</code></h6>
<div class="paragraph">
<p>The class <code>com.mgmtp.perfload.core.client.LtRunner</code> is associated with an <code>com.mgmtp.perfload.core.client.driver.LtDriver</code> instance. It executes the LtDriver as many times as specified by the loops parameter. Before and after the whole execution as well as before and after each loop iteration, events are triggered. <code>com.mgmtp.perfload.core.client.LtRunner</code> is wrapped into a <code>Runnable</code> instance that is submitted to the executor service. Exceptions thrown during execution are wrapped and re-thrown as <code>ExecutionException</code> when <code>get()</code> is called on the resulting Future. When the above-mentioned completion queue is polled exceptions may be reacted on early and at a central place.</p>
</div>
<h6 id="_interface_code_com_mgmtp_perfload_core_client_driver_ltdriver_code" class="discrete">Interface <code>com.mgmtp.perfload.core.client.driver.LtDriver</code></h6>
<div class="paragraph">
<p><code>com.mgmtp.perfload.core.client.driver.LtDriver</code> is merely an interface. Code that is to be executed during a load test must be implemented in the <code>execute</code> method.</p>
</div>
<h5 id="_web_load_tests" class="discrete">Web Load Tests</h5>
<div class="paragraph">
<p>Web load tests are naturally more complex. Requests must be executed, responses must be parsed. Certain values may have to be extracted from a previous response in order to replace placeholder tokens for the next request, and so on. In all these areas, projects may have special requirements. Thus, perfLoad provides sensible defaults and offers the necessary extensibility. The diagram below shows the general scenario for Web load tests starting out with <code>com.mgmtp.perfload.core.client.LtRunner</code>. The steps before that are the same as for simple load tests.</p>
</div>
<div class="paragraph">
<p>image:sequence-diagram_web-driver.png</p>
</div>
<h6 id="_class_code_com_mgmtp_perfload_core_web_webltdriver_code" class="discrete">Class <code>com.mgmtp.perfload.core.web.WebLtDriver</code></h6>
<div class="paragraph">
<p>The class <code>com.mgmtp.perfload.core.web.WebLtDriver</code> is the default <code>com.mgmtp.perfload.core.client.driver.LtDriver</code> implementation for Web load tests. It calls a <code>com.mgmtp.perfload.core.web.flow.RequestFlowHandler</code> which is responsible for any further processing.</p>
</div>
<h6 id="_interface_code_com_mgmtp_perfload_core_web_flow_requestflowhandler_code" class="discrete">Interface <code>com.mgmtp.perfload.core.web.flow.RequestFlowHandler</code></h6>
<div class="paragraph">
<p>A <code>com.mgmtp.perfload.core.web.flow.RequestFlowHandler</code> processes pre-recorded requests from an XML file. It replaces placeholder tokens in parameterized requests and calls appropriate +RequestHandler+s for processing requests. PerfLoad will provide a default implementation that may easily be extended, e. g. for loading project-specific test data from a database.</p>
</div>
<h6 id="_interface_code_com_mgmtp_perfload_core_web_request_requesthandler_code" class="discrete">Interface <code>com.mgmtp.perfload.core.web.request.RequestHandler</code></h6>
<div class="paragraph">
<p>A <code>com.mgmtp.perfload.core.web.request.RequestHandler</code> executes requests. PerfLoad supports all HTTP methods. Custom request handlers may be configured.</p>
</div>
<h6 id="_interface_code_com_mgmtp_perfload_core_web_response_responseparser_code" class="discrete">Interface <code>com.mgmtp.perfload.core.web.response.ResponseParser</code></h6>
<div class="paragraph">
<p>A <code>com.mgmtp.perfload.core.web.response.ResponseParser</code> basically does what its name implies. Based on regular expressions, the default implementation can validate a response and extract replacement values for placeholder tokens from it.</p>
</div>
<h4 id="_next_steps" class="discrete">Next Steps</h4>
<div class="paragraph">
<p>After this general overview, we can continue delving in deeper:</p>
</div>
<div class="sect2">
<h3 id="_developing_a_load_test_driver"><a class="link" href="#_developing_a_load_test_driver">6.1. Developing a Load Test Driver</a></h3>
<div class="paragraph">
<p>A load test driver is the piece of software that is executed during a load test. It acts as a client to the system under test. It is basically just a jar file (or multiple jar files if further dependencies are needed). For simple tests, the jar needs to contain at least a properties file and a request flow file. For more advanced tests, custom Java classes will be required.</p>
</div>
<div class="paragraph">
<p>Initially, we&#8217;ll focus on Web load tests using <code>com.mgmtp.perfload.core.client.web.WebLtDriver</code> as driver implementation. Later on, we&#8217;ll look at calling scripts using <code>com.mgmtp.perfload.core.client.driver.ScriptLtDriver</code> and, finally, at implementing custom drivers.</p>
</div>
<div class="sect3">
<h4 id="_project_setup"><a class="link" href="#_project_setup">6.1.1. Project Setup</a></h4>
<div class="paragraph">
<p>For Maven users, add the following dependency to your driver project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>com.mgmtp.perfload<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>perfload-client<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>insert current version<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>

<span class="comment">&lt;!-- Contains DriverTestRunner. Only needed during development. --&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>com.mgmtp.perfload<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>perfload-test-utils<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>insert current version<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following screenshot shows an example for a driver project in Eclipse:</p>
</div>
<div class="paragraph">
<p>image:project_structure.png</p>
</div>
<div class="paragraph">
<p>The following table quickly explains the files on the screenshot:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:50%;">
<col style="width:50%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Class</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ExampleModule</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Guice module for the driver. Needs to be specified in the testplan</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ExampleListener</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Listener implementation for hooking into the request flow execution</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>example_request_flow.xml</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Contains the request flow</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>testdata.txt</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>CSV file containing test data</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>perfload.utf8.props</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Properties file</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DriverTest</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Test class for debugging and testing the driver.</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>A load test driver can be easily debugged and tested in an IDE using <code>com.mgmtp.perfload.test.utils.DriverTestRunner</code>. This class provides a static method that executes the driver once directly in the IDE without the need for the whole perfLoad framework.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="jav language-jav">DriverTestRunner.runDriver(new ExampleModule(new PropertiesMap()), &quot;myOperation&quot;, &quot;myTarget&quot;);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_properties"><a class="link" href="#_properties">6.1.2. Properties</a></h4>
<div class="paragraph">
<p>The properties file <code>perfload.utf8.props</code> must be present in the classpath root of the driver jar. The file must have the extension <code>.utf8.props</code> which indicates that the file, unlike the old standard Java properties files, must be UTF-8-encoded. Java 6 added support for properties in UTF-8 format. The file extension is changed becaused Eclipse will by default always try to encode properties files in Latin-1 adding unicode escapes for non-Latin-1 characters. Internally, perfLoad uses the class <code>com.mgmtp.perfload.core.common.util.PropertiesMap</code> to handle properties.</p>
</div>
<div class="paragraph">
<p>The whole test execution in perfLoad is based on <code>operations</code> and <code>targets</code>. An <code>operation</code> defines what is to be executed, e. g. which request flow (see next section) for Web load test, and a <code>target</code> defines against which system (there may be multiple application servers) the <code>operation</code> is executed. The following example shows how <code>operations</code> and <code>targets</code> for a browsing and a checkout scenario of an online shop could be configured.</p>
</div>
<div class="paragraph">
<p><strong>Properties Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="properties language-properties"># two request flow for operation'browsing'; multiple comma-separated request flows may
# be specified, which are executed sequentially
operation.browsing.requestflows=requestflows/browsing1.xml,requestflows/browsing2.xml
# request flow for operation 'checkout'
operation.checkout.requestflows=requestflows/checkout.xml

# two target configurations, 'appserver01' and 'appserver02'
target.appserver01.host=http://myshop01.mgm-tp.com
target.appserver02.host=http://myshop02.mgm-tp.com

# custom properties may be added
my.custom.property=foo</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_request_flows"><a class="link" href="#_request_flows">6.1.3. Request Flows</a></h4>
<div class="paragraph">
<p>During a Web load test, perfLoad executes a number of pre-defined parameterizable HTTP requests that make up a so-called request flow. Multiple request flows may be specified for an <code>operation</code> which are then executed sequentially. The following XML file shows how a request flow is configured. Parameter values may be wrapped into CDATA blocks if necessary. Different request types are shown exemplarily.</p>
</div>
<div class="paragraph">
<p><strong>Request Flow Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;requestFlow&gt;</span>
  <span class="tag">&lt;request</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">GET</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/home</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

  <span class="tag">&lt;request</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">POST</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/login</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>${username}<span class="tag">&lt;/param&gt;</span>
    <span class="comment">&lt;!-- use CDATA blocks if necessary --&gt;</span>
    <span class="tag">&lt;param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="inline-delimiter">&lt;![CDATA[</span>${password}<span class="inline-delimiter">]]&gt;</span><span class="tag">&lt;/param&gt;</span>
  <span class="tag">&lt;/request&gt;</span>

  <span class="tag">&lt;request</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">PUT</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/test</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;body&gt;</span><span class="inline-delimiter">&lt;![CDATA[</span>some body content, might be XML or JSON<span class="inline-delimiter">]]&gt;</span><span class="tag">&lt;/body&gt;</span>
  <span class="tag">&lt;/request&gt;</span>

  <span class="tag">&lt;request</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">POST</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/test/42</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;body</span> <span class="attribute-name">resourcePath</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">body.txt</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">resourceType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;/request&gt;</span>

  <span class="comment">&lt;!--
    Uses a uri alias so requests are grouped under this alias
    in the reponse time distribution report.
  --&gt;</span>
  <span class="tag">&lt;request</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">POST</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/image/${id}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uriAlias</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Image Upload</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;header</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Content-Type</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>image/png<span class="tag">&lt;/header&gt;</span>
    <span class="tag">&lt;body</span> <span class="attribute-name">resourcePath</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">logo.png</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">resourceType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">binary</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;/request&gt;</span>

  <span class="comment">&lt;!--
    Note the use of '&amp;amp;' in the URL. otherwise XML validation would fail.
    The value of the first parameter and the name of the second parameter are parameterized.
  --&gt;</span>
  <span class="tag">&lt;request</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">GET</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/foo?param1=${value1}</span><span class="entity">&amp;amp;</span><span class="content">${param2}=value2</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

  <span class="comment">&lt;!-- same as the above, for GET request, the query string is created automatically --&gt;</span>
  <span class="tag">&lt;request</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">GET</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/foo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">param1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>${value1}<span class="tag">&lt;/param&gt;</span>
    <span class="tag">&lt;param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${param2}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>value2<span class="tag">&lt;/param&gt;</span>
  <span class="tag">&lt;/request&gt;</span>

  <span class="comment">&lt;!-- Requests may be skipped. In this case, the skip parameter is itself parameterized --&gt;</span>
  <span class="tag">&lt;request</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">GET</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/bar</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">skip</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${skip}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

  <span class="tag">&lt;request</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">GET</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/rest</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="comment">&lt;!-- add custom header --&gt;</span>
    <span class="tag">&lt;header</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Content-Type</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>application/xml<span class="tag">&lt;/header&gt;</span>
  <span class="tag">&lt;/request&gt;</span>
<span class="tag">&lt;/requestFlow&gt;</span></code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_parameterization_of_requests"><a class="link" href="#_parameterization_of_requests">Parameterization of Requests</a></h5>
<div class="paragraph">
<p>The example above contains placeholder tokens in many places. In fact, any element atribute or content in the XML file is parameterizable. perfLoad uses Ant-style placeholder tokens, such as <code>${username}</code>. Internally, perfLoad holds placeholders and their replacement values in a <code>com.mgmtp.perfload.core.client.util.PlaceholderContainer</code> which is confined to the current thread. Replacement values may either be extracted from responses (see next section) or added to the <code>com.mgmtp.perfload.core.client.util.PlaceholderContainer</code> programmatically. The latter can be done using an event listener (see the section on events below), e. g. using test data that come from e. g. a database or CSV files. At runtime, placeholder tokens are resolved just before executing a request.</p>
</div>
</div>
<div class="sect4">
<h5 id="_extracting_details_from_responses"><a class="link" href="#_extracting_details_from_responses">Extracting Details from Responses</a></h5>
<div class="sect5">
<h6 id="_response_body_extraction"><a class="link" href="#_response_body_extraction">Response Body Extraction</a></h6>
<div class="paragraph">
<p>Details may be extracted from HTTP responses in order to be stored in the <code>com.mgmtp.perfload.core.client.util.PlaceholderContainer</code>.</p>
</div>
<div class="paragraph">
<p><strong>Detail Extraction Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;requestFlow&gt;</span>
  <span class="tag">&lt;request</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">GET</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/home</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="comment">&lt;!-- extract value for placeholder 'foo' from response --&gt;</span>
    <span class="tag">&lt;detailExtraction</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="inline-delimiter">&lt;![CDATA[</span>foo=([^&quot;]+)&quot;<span class="inline-delimiter">]]&gt;</span>
    <span class="tag">&lt;/detailExtraction&gt;</span>
    <span class="comment">&lt;!-- extract value for placeholder 'bar' from response --&gt;</span>
    <span class="tag">&lt;detailExtraction</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="inline-delimiter">&lt;![CDATA[</span>name=&quot;bar&quot;\s+value=&quot;([^&quot;]+)&quot;<span class="inline-delimiter">]]&gt;</span>
    <span class="tag">&lt;/detailExtraction&gt;</span>
  <span class="tag">&lt;/request&gt;</span>

  <span class="tag">&lt;request</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">POST</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/next</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="comment">&lt;!-- use extracted placeholder values in next request --&gt;</span>
    <span class="tag">&lt;param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>${foo}<span class="tag">&lt;/param&gt;</span>
    <span class="tag">&lt;param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>${bar}<span class="tag">&lt;/param&gt;</span>
  <span class="tag">&lt;/request&gt;</span>
<span class="tag">&lt;/requestFlow&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>detailExtraction</code> element must have a regular expression pattern as text content that identifies what to extract. It may be wrapped into a CDATA block. The regular expression is applied against the response body using <code>java.util.regex.Matcher.find()</code>. The element can have the following attributes:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:33%;">
<col style="width:33%;">
<col style="width:33%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The key under which the extracted value is stored in the <code>PlaceholderContainer</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupIndex</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The value is always extracted from a capturing group. This attribute identifies the index of the group. Defaults to <code>1</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>failIfNotFound</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>If <code>true</code>, a <code>com.mgmtp.perfload.core.web.response.PatternNotFoundException</code> is thrown if no subsequence matching the regular expression pattern is found in the response body and no <code>defaultValue</code> is defined. Defaults to <code>true</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>defaultValue</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Default value to use if no subsequence matching the regular expression pattern is found in the response body.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>indexed</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>By default, the result of the first match is extracted. If <code>indexed</code> is <code>true</code>, all matches are extracted and stored as <code>&lt;name&gt;#&lt;matchIndex&gt;</code> in the <code>PlaceholderContainer</code>. Defaults to <code>false</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
<div class="sect5">
<h6 id="_response_header_extraction"><a class="link" href="#_response_header_extraction">Response Header Extraction</a></h6>
<div class="paragraph">
<p>Response header may be extracted and store in the <code>PlaceholderContainer</code> as well. By default, the name of the headser is used as the placeholder name. An alternative placeholder name my optionally be specified. See example below.</p>
</div>
<div class="paragraph">
<p><strong>Header Extraction Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;requestFlow&gt;</span>
  <span class="tag">&lt;request</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">GET</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/home</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;headerExtraction</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myFirstHeader</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;headerExtraction</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mySecondHeader</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">placeholderName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myPlaceholder</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;/request&gt;</span>
<span class="tag">&lt;/requestFlow&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_validating_responses"><a class="link" href="#_validating_responses">6.1.4. Validating Responses</a></h4>
<div class="paragraph">
<p>A <code>com.mgmtp.perfload.core.web.response.ResponseValidator</code> is responsible for validating and parsing HTTP responses. The default implementation is the class <code>com.mgmtp.perfload.core.web.response.DefaultResponseParser</code>. It checks for allowed or forbidden HTTP status codes and error patterns, and can extract details from the response as described above. The <code>com.mgmtp.perfload.core.web.response.DefaultResponseParser</code> can be configured with properties. If a response is considered invalid, an <code>com.mgmtp.perfload.core.web.response.InvalidResponseException</code> is thrown, which causes the execution of the current request flow to be aborted (not the whole test, though!).</p>
</div>
<div class="sect4">
<h5 id="_checking_http_status_codes"><a class="link" href="#_checking_http_status_codes">Checking HTTP Status Codes</a></h5>
<div class="paragraph">
<p>Optionally, comma-separated lists of allowed or forbidden HTTP status code may be configured. Allowed and forbidden status codes must be mutually exclusive. Usually, it only makes sense to specify either allowed or forbidden status code, not both.</p>
</div>
<div class="paragraph">
<p><strong>Example for the Configuration of Allowed and Forbidden HTTP Status Codes</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="properties language-properties">responseParser.allowedStatusCodes=200
responseParser.forbiddenStatusCodes=404,500</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_checking_the_response_body"><a class="link" href="#_checking_the_response_body">Checking the Response Body</a></h5>
<div class="paragraph">
<p>Optionally, regular expression patterns may be configured marking a response invalid if a subsequence matching one of the patterns is found in the response body. Multiple pattern may be specified. They must be indexed starting at one.</p>
</div>
<div class="paragraph">
<p><strong>Exaample for the Configuration of Error Patterns</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="properties language-properties"># check for specific marker the app adds in case of an error
responseParser.errorPattern.1=&lt;!--loadtest stop --&gt;
# make sure the page is complete
responseParser.errorPattern.2=(?is)^((?!&lt;/html&gt;).)*$</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first one checks for the error marker <code>&lt;!--loadtest stop --&gt;</code> which is written to the response whenever an error occurs (e. g. a validation error due to invalid user input). The seconds one checks that the body contains a closing HTML tag making sure the complete response page was returned.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_test_modules"><a class="link" href="#_test_modules">6.1.5. Test Modules</a></h4>
<div class="paragraph">
<p>perfLoad supports <a href="http://jcp.org/aboutJava/communityprocess/final/jsr330/index.html">JSR 330</a> dependency injection, which driver implementers may take full advantage of. The wiring for JSR 330 is done using <a href="http://code.google.com/p/google-guice/">Google Guice</a>. A load test driver needs a Guice module which must be specified in the testplan (see [Creating a Testplan](Creating a Testplan)). perfLoad already comes with a pre-configured module for Web load tests <code>com.mgmtp.perfload.core.web.config.WebLtModule</code> which is sufficient for simple tests that are not parameterized with special test data. For more flexibility, a custom Guice module is required.</p>
</div>
<div class="paragraph">
<p>Custom Guice modules must inherit from <code>com.mgmtp.perfload.core.client.config.AbstractLtModule</code>. For Web tests, <code>com.mgmtp.perfload.core.weg.config.AbstractWebLtModule</code> should be subclassed. Custom modules for Web load tests must install <code>com.mgmtp.perfload.core.web.config.WebLtModule</code> and provide additional bindings as needed.</p>
</div>
<div class="paragraph">
<p><strong>Module Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ExampleModule</span> <span class="directive">extends</span> AbstractLtModule {
    <span class="directive">public</span> ExampleModule(<span class="directive">final</span> PropertiesMap testplanProperties) {
        <span class="local-variable">super</span>(testplanProperties);
    }

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        <span class="comment">// Custom bindings</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Module Example for Web Tests</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ExampleWebModule</span> <span class="directive">extends</span> AbstractWebLtModule {
    <span class="directive">public</span> ExampleWebModule(<span class="directive">final</span> PropertiesMap testplanProperties) {
        <span class="local-variable">super</span>(testplanProperties);
    }

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigureWebModule() {
       install(<span class="keyword">new</span> WebLtModule(testplanProperties));

       <span class="comment">// Custom bindings</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_scoping"><a class="link" href="#_scoping">6.1.6. Scoping</a></h4>
<div class="paragraph">
<p><a href="http://jcp.org/aboutJava/communityprocess/final/jsr330/index.html">JSR 330</a> provides a singleton scope, and, by default, objects are unscoped in Guice, i. e. new instances are created as requested. In addition to that, perfLoad implements a <code>com.mgmtp.perfload.core.client.config.scope.ThreadScope</code>. This allows it to confine objects to threads, i. e. to each execution of a <code>operation</code>/<code>target</code> combination. The <code>com.mgmtp.perfload.core.client.config.scope.ThreadScope</code> is cleaned up automatically after a test thread is done, so a thread&#8217;s state is cleared which is necessary because threads are pooled and may be reused. The annotation <code>com.mgmtp.perfload.core.client.config.annotations.ThreadScoped</code> can be used to mark classes that should have thread scope.</p>
</div>
</div>
<div class="sect3">
<h4 id="_events"><a class="link" href="#_events">6.1.7. Events</a></h4>
<div class="paragraph">
<p>perfLoad triggers a number of events which driver implementers may react on, e. g. in order to load test data for parameterized tests. The following event listener interfaces can be implemented:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>com.mgmtp.perfload.core.client.event.LtProcessEventListener</code></p>
</li>
<li>
<p><code>com.mgmtp.perfload.core.client.event.LtRunnerEventListener</code></p>
</li>
<li>
<p><code>com.mgmtp.perfload.core.web.event.RequestFlowEventListener</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Listeners may be registered as follows in the Guice module and are thus themselves subject to JSR 330 injection. For convenience, the class <code>com.mgmtp.perfload.core.client.web.event.LtListenerAdapter</code> is available which provides a dummy implementation of all three listener interfaces. Note that it is possible that listeners can be scoped. It is e. g. possible to make a listener thread-scoped, i. e. each driver execution gets its own listener confined to the current thread.</p>
</div>
<div class="paragraph">
<p><strong>Registering Event Listeners</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ExampleWebModule</span> <span class="directive">extends</span> AbstractWebLtModule {
    <span class="directive">public</span> ExampleWebModule(<span class="directive">final</span> PropertiesMap testplanProperties) {
        <span class="local-variable">super</span>(testplanProperties);
    }

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigureWebModule() {
        install(<span class="keyword">new</span> WebLtModule(testplanProperties));

        bindLtProcessEventListener().to(MyListener.class);
        bindLtRunnerEventListener().to(MyListener.class);
        bindRequestFlowEventListener().to(MyListener.class);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_waiting_times"><a class="link" href="#_waiting_times">6.1.8. Waiting Times</a></h4>
<div class="paragraph">
<p>It is possible to configure waiting times at the following execution points during a test run:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Before the the start of each driver execution</p>
</li>
<li>
<p>Before each request (<em>applies to Web load tests only</em>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The waiting time before each request is calculated using a <code>com.mgmtp.perfload.core.client.util.WaitingTimeStrategy</code>. The following implementations are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>com.mgmtp.perfload.core.client.util.ConstantWaitingTimeStrategy</code></p>
</li>
<li>
<p><code>com.mgmtp.perfload.core.client.util.EqualDistWaitingTimeStrategy</code></p>
</li>
<li>
<p><code>com.mgmtp.perfload.core.client.util.BetaDistWaitingTimeStrategy</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The default implementation used is <code>com.mgmtp.perfload.core.client.util.ConstantWaitingTimeStrategy</code>. It may be overridden in the test&#8217;s Guice module:</p>
</div>
<div class="paragraph">
<p><strong>Setting a WaitingTimeStrategy</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ExampleModule</span> <span class="directive">extends</span> AbstractLtModule {
    <span class="directive">public</span> ExampleModule(<span class="directive">final</span> PropertiesMap testplanProperties) {
        <span class="local-variable">super</span>(testplanProperties);
    }

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(WaitingTimeStrategy.class).to(EqualDistWaitingTimeStrategy.class);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Waiting times are configurable using the following properties.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:33%;">
<col style="width:33%;">
<col style="width:33%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wtm.beforeTestStartMillis</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The random time between 0 and this value each test thread waits before it executes the driver logic. This is useful for static tests only and guarantees for a certain ramp-up time.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>0</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wtm.strategy.constant.waitingTimeMillis</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Constant waiting time before each request.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>0</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wtm.strategy.equaldist.intervalMinMillis</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Applies to <code>EqualDistWaitingTimeStrategy</code> only.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>none</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wtm.strategy.equaldist.intervalMaxMillis</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Applies to <code>EqualDistWaitingTimeStrategy</code> only.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>none</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wtm.strategy.betadist.intervalMinMillis</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Applies to <code>BetaDistWaitingTimeStrategy</code> only.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>none</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wtm.strategy.betadist.intervalMaxMillis</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Applies to <code>BetaDistWaitingTimeStrategy</code> only.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>none</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wtm.strategy.betadist.betaDistParamA</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Applies to <code>BetaDistWaitingTimeStrategy</code> only.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>none</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wtm.strategy.betadist.betaDistParamB</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Applies to <code>BetaDistWaitingTimeStrategy</code> only.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>none</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The default waiting time is 500 ms between requests. In most cases, the defaults are just fine.</p>
</div>
</div>
<div class="sect3">
<h4 id="_custom_request_handlers"><a class="link" href="#_custom_request_handlers">6.1.9. Custom Request Handlers</a></h4>
<div class="paragraph">
<p>Out of the box, perfLoad supports all HTTP request types. For certain purposes it might be necessary to implement a custom request handler, e. g. for making calls into Applet code. The following code snippets show how a request handler is registered and configured in a request flow. In this case, the <code>AppletRequestHandler</code> uses reflection to call a method identified by the <code>uri</code> of the request.</p>
</div>
<div class="paragraph">
<p><strong>Registering a Custom Request Handler</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ExampleWebModule</span> <span class="directive">extends</span> AbstractWebLtModule {
    <span class="directive">public</span> ExampleWebModule(<span class="directive">final</span> PropertiesMap testplanProperties) {
        <span class="local-variable">super</span>(testplanProperties);
    }

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigureWebModule() {
        install(<span class="keyword">new</span> WebLtModule(testplanProperties));

        bindRequestHandler(<span class="string"><span class="delimiter">&quot;</span><span class="content">APPLET</span><span class="delimiter">&quot;</span></span>).to(AppletRequestHandler.class);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example for a Request Flow with a Custom Request Handler</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java">&lt;?xml version=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span> encoding=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span>?&gt;
&lt;requestFlow&gt;
  &lt;request type=<span class="string"><span class="delimiter">&quot;</span><span class="content">GET</span><span class="delimiter">&quot;</span></span> uri=<span class="string"><span class="delimiter">&quot;</span><span class="content">/home</span><span class="delimiter">&quot;</span></span> /&gt;
  &lt;request type=<span class="string"><span class="delimiter">&quot;</span><span class="content">APPLET</span><span class="delimiter">&quot;</span></span> uri=<span class="string"><span class="delimiter">&quot;</span><span class="content">myAppletUri</span><span class="delimiter">&quot;</span></span> /&gt;
&lt;/requestFlow&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If necessary (should not really be the case!), it is possible to override perfLoad&#8217;s built-in request handlers using Guice' module overrides.</p>
</div>
<div class="paragraph">
<p><strong>Example for Overriding the Request Handler for GET requests</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ExampleWebModule</span> <span class="directive">extends</span> AbstractWebLtModule {
    <span class="directive">public</span> ExampleWebModule(<span class="directive">final</span> PropertiesMap testplanProperties) {
        <span class="local-variable">super</span>(testplanProperties);
    }

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigureWebModule() {
        <span class="comment">// Install WebLtModule overriding the handler for GET requests.</span>
        Module module = Modules.override(<span class="keyword">new</span> WebLtModule(testplanProperties))
            .with(<span class="keyword">new</span> AbstractWebLtModule(testplanProperties) {
                <span class="annotation">@Override</span>
                <span class="directive">protected</span> <span class="type">void</span> doConfigureWebModule() {
                    bindRequestHandler(<span class="string"><span class="delimiter">&quot;</span><span class="content">GET</span><span class="delimiter">&quot;</span></span>).to(MyCustomGetRequestHandler.class);
                }
            });
        install(module);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_script_driver"><a class="link" href="#_using_the_script_driver">6.1.10. Using the Script Driver</a></h4>
<div class="paragraph">
<p>In order to create real-world scenarios, it can be interesting to call scripts that trigger some action during a load test. perfLoad has <code>com.mgmtp.perfload.core.client.driver.ScriptLtDriver</code> for this use case. In order to use the script driver, it must be configured in <code>perfload.utf8.props</code>, which is shown in the following table.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:33%;">
<col style="width:33%;">
<col style="width:33%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operation.&lt;operation&gt;.procInfo.dir</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The working directory for the new process. If not specified, the current directory is used.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operation.&lt;operation&gt;.procInfo.freshEnvironment</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Specifies whether the new process should get a fresh environment. Defaults to <code>false</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operation.&lt;operation&gt;.procInfo.envVars.&lt;envVar&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Specifies an environment variable for the new process.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operation.&lt;operation&gt;.procInfo.commands.&lt;index&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Commands to start the process, indexed starting at 1. The list of commands is passed to <code>java.lang.ProcessBuilder</code> when launching the process.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operation.&lt;operation&gt;.procInfo.redirectProcessOutput</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Specified whether the process' output should be redirected to the log of the client process. Defaults to <code>false</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operation.&lt;operation&gt;.procInfo.logPrefix</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Prefix to use for the process&#8217;s log when log is redirected.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operation.&lt;operation&gt;.procInfo.waitFor</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Specifies whether termination of the process should be awaited. Defaults to <code>true</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Configuration Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="properties language-properties"> # the working directory for the new process
 operation.myOperation.procInfo.dir=/home/foo/bar

 # should the process inherit the environment or get a fresh one?
 operation.myOperation.procInfo.freshEnvironment=true

 # environment variable for the new process
 operation.myOperation.procInfo.envVars.APP_OPTS=-Dfoo=bar
 operation.myOperation.procInfo.envVars.MY_ENV_VAR=baz

 # commands for the new process (starting at 1)
 operation.myOperation.procInfo.commands.1=/bin/sh -c ./my_script.sh
 operation.myOperation.procInfo.commands.2=-param1
 operation.myOperation.procInfo.commands.3=-param2=42

 # should the process' output be redirected to perfLoad's client log?
 operation.myOperation.procInfo.redirectProcessOutput=true

 # optional prefix to be used for the process's log when log is redirected
 operation.myOperation.procInfo.logPrefix=myProc&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>perfLoad automatically selects the <code>ScriptLtDriver</code> if the properties contain keys starting with <code>operation.&lt;operation&gt;.procInfo</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_custom_driver"><a class="link" href="#_creating_a_custom_driver">6.1.11. Creating a Custom Driver</a></h4>
<div class="paragraph">
<p>Custom load test drivers must implement the interface <code>com.mgmtp.perfload.core.client.driver.LtDriver</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="directive">public</span> <span class="type">class</span> <span class="class">MyCustomDriver</span> <span class="directive">implements</span> LtDriver {

    <span class="directive">public</span> <span class="type">void</span> execute() <span class="directive">throws</span> <span class="exception">Exception</span> {
        <span class="comment">// custom driver logic goes here</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The driver must be registered in a Guice module under its own key. A <code>com.mgmtp.perfload.core.client.config.DriverSelectionPredicate</code> must be implemented that decides, based on the current operation and properties, if the driver is selected. When ever perfLoad executes an <code>operation</code>, it iterates over the selection predicates of registered drivers. The first match is selected. The iteration order is non-deterministic. The selection criteria should thus be distinct.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java">DriverSelectionPredicate selectionPredicate = <span class="keyword">new</span> DriverSelectionPredicate() {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">boolean</span> apply(<span class="directive">final</span> <span class="predefined-type">String</span> operation, <span class="directive">final</span> PropertiesMap properties) {
        <span class="comment">// return true, if the driver is to be used</span>
        <span class="comment">// for the specified operation and properties</span>
        <span class="keyword">return</span> properties.containsKey(<span class="string"><span class="delimiter">&quot;</span><span class="content">operation.</span><span class="delimiter">&quot;</span></span> + operation + <span class="string"><span class="delimiter">&quot;</span><span class="content">.myCustomDriver</span><span class="delimiter">&quot;</span></span>);
    }
}
bindLtDriver(<span class="string"><span class="delimiter">&quot;</span><span class="content">myCustomDriver</span><span class="delimiter">&quot;</span></span>).forPredicate(selectionPredicate).to(MyCustomDriver.class);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_load_profile"><a class="link" href="#_creating_a_load_profile">6.2. Creating a Load Profile</a></h3>
<div class="paragraph">
<p>One of perfLoad&#8217;s strength is the fact that it uses load profiles. A load profile consist of load profile events. Each events stands for exactly one execution of the load test driver for a specific <code>operation</code> and <code>target</code> at a specific time by a specific client process. The load profile define how the load is distributed across all client process on all participating client hosts. For each execution, a new client thread is spawn at the specified time, i. e. the load is guaranteed to follow the profile independently of the load on the system under test.</p>
</div>
<div class="paragraph">
<p>Load profiles can be created using perfLoad&#8217;s Load Profile Editor. The following series of screenshots explains this.</p>
</div>
<div class="paragraph">
<p>Initially, operations, targets, and clients need to be configured.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/lpe1.png" alt="Load Profile Settings"></span></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/lpe2.png" alt="Load Profile Settings"></span></p>
</div>
<div class="paragraph">
<p>Now we can add <code>load curve assignments</code> for one or multiple operations. A load test may contain executions for one operation only, but combination tests executing multiple operations are supported as well.</p>
</div>
<div class="paragraph">
<p>image/lpe3.png[Load Profile Settings]</p>
</div>
<div class="paragraph">
<p>image/lpe4.png[Load Profile Settings]</p>
</div>
<div class="paragraph">
<p>image/lpe5.png[Load Profile Settings]</p>
</div>
<div class="paragraph">
<p>When load profile should now be safe and additionally, it must be exported as events file (extension <code>.perfload</code>). The events file must be copied to <code>console/testplans/loadprofiles</code> on the controller host.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_testplan"><a class="link" href="#_creating_a_testplan">6.3. Creating a Testplan</a></h3>
<div class="paragraph">
<p>A testplan is a small XML file that puts together all the pieces necessary for performing a load test. As we have learned, we need a load test driver and a load profile. The testplan is the glue between the driver and the load profile. Multiple testplans may be created in order to run the same driver with different load profiles.</p>
</div>
<div class="paragraph">
<p><strong>Testplan Example</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;testplan</span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">xsi:noNamespaceSchemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://mgm-tp.github.io/perfload/schema/1.0/perfload-testplan.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;module&gt;</span>com.mgmtp.perfload.example.driver.ExampleModule<span class="tag">&lt;module&gt;</span>
    <span class="tag">&lt;loadProfile&gt;</span>example.perfload<span class="tag">&lt;/loadProfile&gt;</span>
    <span class="tag">&lt;testJars&gt;</span>
        <span class="tag">&lt;testJar&gt;</span>driver-example-1.0.0-SNAPSHOT.jar<span class="tag">&lt;/testJar&gt;</span>
    <span class="tag">&lt;/testJars&gt;</span>
    <span class="comment">&lt;!-- optional properties --&gt;</span>
    <span class="tag">&lt;properties&gt;</span>
        <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">prop1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>value1<span class="tag">&lt;/property&gt;</span>
        <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">prop2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>value2<span class="tag">&lt;/property&gt;</span>
    <span class="tag">&lt;/properties&gt;</span>
    <span class="comment">&lt;!-- optional JVM args for the client process --&gt;</span>
    <span class="tag">&lt;jvmargs&gt;</span>
        <span class="tag">&lt;jvmarg&gt;</span>-Dsysprop1=value1<span class="tag">&lt;/jvmarg&gt;</span>
        <span class="tag">&lt;jvmarg&gt;</span>-Dsysprop2=value2<span class="tag">&lt;/jvmarg&gt;</span>
    <span class="tag">&lt;/jvmargs&gt;</span>
<span class="tag">&lt;/testplan&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Testplan Reference</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:25%;">
<col style="width:25%;">
<col style="width:25%;">
<col style="width:25%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Element</th>
<th class="tableblock halign-left valign-top">Parent Element</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>testplan</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Root element.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>module</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>testplan</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The fully qualified class name of the Guice module that configures the test.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loadProfile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>testplan</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The path to the load profile events file. The file is search in subdirectory <code>loadprofiles</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>testJars</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>testplan</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Lists jar files the driver needs in addition to those the perfLoad client provides anyways.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>yes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>testJar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>testJars</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A jar file the driver needs. Jar files are search relative to the console&#8217;s subdirectory <code>test-lib</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>At lease one.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>properties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>testplan</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Container element for properties.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>property</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>properties</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A property specific to the testplan. The value of the property must be specified as this element&#8217;s content. Testplan properties are merged with those in <code>perfload.utf8.props</code> while those in the testplan file override already exinsting properties. Thus, it is possible to override properties for specific tests only.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vmargs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>testplan</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Container element for additional JVM args for the client process.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vmarg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vmargs</code></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>A JVM argument for the client process.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>no</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Using XInclude in Testplans</strong></p>
</div>
<div class="paragraph">
<p>XInclude is supported in testplan file, i. e. it is possible to extract test jars to a separate file. It is very common to have many testplans using the same driver. Thus, a separate file reduces redundancy and eases maintainance. Note the usage of the XInclude namespace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;testplan</span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">xmlns:xi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XInclude</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">xsi:noNamespaceSchemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://mgm-tp.github.io/perfload/schema/1.0/perfload-testplan.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;module&gt;</span>com.mgmtp.perfload.example.driver.ExampleModule<span class="tag">&lt;module&gt;</span>
    <span class="tag">&lt;loadProfile&gt;</span>example.perfload<span class="tag">&lt;/loadProfile&gt;</span>
    <span class="tag">&lt;xi:include</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">testJars.xml</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/testplan&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;testJars&gt;</span>
    <span class="tag">&lt;testJar&gt;</span>driver-example-1.0.0-SNAPSHOT.jar<span class="tag">&lt;/testJar&gt;</span>
    <span class="tag">&lt;testJar&gt;</span>my-special-third-party-dependency.jar<span class="tag">&lt;/testJar&gt;</span>
<span class="tag">&lt;/testJars&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_a_complete_example"><a class="link" href="#_a_complete_example">6.4. A Complete Example</a></h3>
<div class="paragraph">
<p>This page describes a simple example scenario that tests a returns Fibonacci servlet.</p>
</div>
<div class="sect3">
<h4 id="_the_driver_code"><a class="link" href="#_the_driver_code">6.4.1. The Driver Code</a></h4>
<div class="paragraph">
<p><strong>The Guice Module</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">com.mgmtp.perfload.example.driver</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.google.common.collect.Maps.newHashMapWithExpectedSize</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.apache.commons.io.IOUtils.lineIterator</span>;

<span class="keyword">import</span> <span class="include">java.io.IOException</span>;
<span class="keyword">import</span> <span class="include">java.io.InputStream</span>;
<span class="keyword">import</span> <span class="include">java.util.Map</span>;

<span class="keyword">import</span> <span class="include">org.apache.commons.io.LineIterator</span>;

<span class="keyword">import</span> <span class="include">com.google.inject.Provides</span>;
<span class="keyword">import</span> <span class="include">com.mgmtp.perfload.core.client.web.config.AbstractWebLtModule</span>;
<span class="keyword">import</span> <span class="include">com.mgmtp.perfload.core.client.web.config.WebLtModule</span>;
<span class="keyword">import</span> <span class="include">com.mgmtp.perfload.core.common.util.PropertiesMap</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">ExampleModule</span> <span class="directive">extends</span> AbstractWebLtModule {

    <span class="directive">public</span> ExampleModule(<span class="directive">final</span> PropertiesMap testplanProperties) {
        <span class="local-variable">super</span>(testplanProperties);
    }

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigureWebModule() {
        bindRequestFlowEventListener().to(ExampleListener.class);
        install(<span class="keyword">new</span> WebLtModule(testplanProperties));
    }

    <span class="annotation">@TestData</span>
    <span class="annotation">@Provides</span>
    <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; provideTestData() {
        <span class="predefined-type">ClassLoader</span> cl = <span class="predefined-type">Thread</span>.currentThread().getContextClassLoader();
        <span class="keyword">try</span> (<span class="predefined-type">InputStream</span> is = cl.getResourceAsStream(<span class="string"><span class="delimiter">&quot;</span><span class="content">testdata/fibonacci.txt</span><span class="delimiter">&quot;</span></span>)) {
            <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; result = newHashMapWithExpectedSize(<span class="integer">20</span>);
            <span class="keyword">for</span> (LineIterator it = lineIterator(is, <span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span>); it.hasNext();) {
                <span class="predefined-type">String</span> line = it.nextLine();
                <span class="keyword">if</span> (line.startsWith(<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span>)) {
                    <span class="keyword">continue</span>;
                }
                <span class="predefined-type">String</span><span class="type">[]</span> columns = line.split(<span class="string"><span class="delimiter">&quot;</span><span class="content">;</span><span class="delimiter">&quot;</span></span>);
                result.put(columns[<span class="integer">0</span>], columns[<span class="integer">1</span>]);
            }
            <span class="keyword">return</span> result;
        } <span class="keyword">catch</span> (<span class="exception">IOException</span> ex) {
            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">IllegalStateException</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Error reading test data.</span><span class="delimiter">&quot;</span></span>, ex);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The module installs <code>import com.mgmtp.perfload.core.web.config.WebLtModule</code> as usual. Plus, it binds a map of test data that is initialized in a provider method and a listener that uses the map in order to select an entry for the current test thread. In this case, the test data is read from a simple text file. In a real-world scenario, a database could be used instead.</p>
</div>
<div class="paragraph">
<p><strong>Qualifying Annotation for the Test Data Map</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">com.mgmtp.perfload.example.driver</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.lang.annotation.ElementType.FIELD</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.lang.annotation.ElementType.METHOD</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.lang.annotation.ElementType.PARAMETER</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.lang.annotation.RetentionPolicy.RUNTIME</span>;

<span class="keyword">import</span> <span class="include">java.lang.annotation.Retention</span>;
<span class="keyword">import</span> <span class="include">java.lang.annotation.Target</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Qualifier</span>;

<span class="annotation">@Retention</span>(RUNTIME)
<span class="annotation">@Target</span>({ FIELD, PARAMETER, METHOD })
<span class="annotation">@Qualifier</span>
<span class="directive">public</span> <span class="annotation">@interface</span> TestData {
    <span class="comment">//</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The annotation <code>TestData</code> is used in order to further qualify the map. This is necessary if different maps of type <code>Map&lt;String, String&gt;</code> are bound. The annotation must itself be annotated with <code>@Qualifier</code>.</p>
</div>
<div class="paragraph">
<p><strong>Listener for Loading Test Data</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">com.mgmtp.perfload.example.driver</span>;

<span class="keyword">import</span> <span class="include">java.util.List</span>;
<span class="keyword">import</span> <span class="include">java.util.Map</span>;
<span class="keyword">import</span> <span class="include">java.util.Map.Entry</span>;
<span class="keyword">import</span> <span class="include">java.util.Random</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Provider</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Singleton</span>;

<span class="keyword">import</span> <span class="include">net.jcip.annotations.Immutable</span>;
<span class="keyword">import</span> <span class="include">net.jcip.annotations.ThreadSafe</span>;

<span class="keyword">import</span> <span class="include">com.google.common.collect.ImmutableList</span>;
<span class="keyword">import</span> <span class="include">com.mgmtp.perfload.core.client.util.PlaceholderContainer</span>;
<span class="keyword">import</span> <span class="include">com.mgmtp.perfload.core.client.web.event.LtListenerAdapter</span>;
<span class="keyword">import</span> <span class="include">com.mgmtp.perfload.core.client.web.event.RequestFlowEvent</span>;

<span class="annotation">@Singleton</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">ExampleListener</span> <span class="directive">extends</span> LtListenerAdapter {
    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">Provider</span>&lt;PlaceholderContainer&gt; placeholderContainerProvider;
    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">List</span>&lt;Entry&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt;&gt; testDataEntries;
    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">Random</span> random = <span class="keyword">new</span> <span class="predefined-type">Random</span>();

    <span class="annotation">@Inject</span>
    <span class="directive">public</span> ExampleListener(<span class="directive">final</span> <span class="predefined-type">Provider</span>&lt;PlaceholderContainer&gt; placeholderContainerProvider,
            <span class="annotation">@TestData</span> <span class="directive">final</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; testData) {
        <span class="local-variable">this</span>.placeholderContainerProvider = placeholderContainerProvider;
        <span class="local-variable">this</span>.testDataEntries = ImmutableList.copyOf(testData.entrySet());
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> beforeRequest(<span class="directive">final</span> RequestFlowEvent event) {
        <span class="type">int</span> index = random.nextInt(testDataEntries.size());
        Entry&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; entry = testDataEntries.get(index);

        PlaceholderContainer placeholderContainer = placeholderContainerProvider.get();
        placeholderContainer.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">n</span><span class="delimiter">&quot;</span></span>, entry.getKey());
        placeholderContainer.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">fibn</span><span class="delimiter">&quot;</span></span>, entry.getValue());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ExampleListener</code> only implements the method <code>beforeRequest</code>. It randomly selects a test data entry and adds replacement values for the placeholder tokens <code>n</code> and <code>fibn</code> to the <code>PlaceholderContainer</code>. The class <code>ExampleListener</code> is bound as a <code>Singleton</code> and is annotated accordingly. The <code>PlaceholderContainer</code> is bound by perfLoad and has <code>ThreadScope</code>. Thus, it should not be injected directly, but a <code>Provider&lt;PlaceholderContainer&gt;</code> should be injected instead. Otherwise, its scope would effectively be widened to that of a <code>Singleton</code>. JSR 330 allows it to inject a provider instead of a direct instance making it possible to always get a correctly scoped object.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_request_flow"><a class="link" href="#_the_request_flow">6.4.2. The Request Flow</a></h4>
<div class="paragraph">
<p><strong>Request Flow with two Requests</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;requestFlow</span> <span class="attribute-name">xmlns:xs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">xs:noNamespaceSchemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://mgm-tp.github.io/perfload/schema/1.0/perfload-request-flow.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;request</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">GET</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/fibonacci</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">n</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>${n}<span class="tag">&lt;/param&gt;</span>
        <span class="tag">&lt;detailExtraction</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fibn</span><span class="delimiter">&quot;</span></span> <span class="tag">&gt;</span>(${fibn})<span class="tag">&lt;/detailExtraction&gt;</span>
    <span class="tag">&lt;/request&gt;</span>
    <span class="tag">&lt;request</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">POST</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">uri</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/fibonacci</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">n</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>${n}<span class="tag">&lt;/param&gt;</span>
        <span class="tag">&lt;detailExtraction</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fibn</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>(${fibn})<span class="tag">&lt;/detailExtraction&gt;</span>
    <span class="tag">&lt;/request&gt;</span>
<span class="tag">&lt;/requestFlow&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a simple request flow that contains a GET and a POST request to the servlet. Upon execution, the placeholders are replaced. The servlet is supposed to return the +n<sup>th</sup> Fibonacci number as plain text. The expected result is then extracted from the response. Of course, this is a somewhat contrived example. In a real-world scenario, one would e. g. extract some id from the response that must be added as a parameter to the following request.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_testplan"><a class="link" href="#_the_testplan">6.4.3. The Testplan</a></h4>
<div class="paragraph">
<p><strong>Fibonacci Testplan</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="tag">&lt;testplan</span> <span class="attribute-name">xmlns:xs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">xs:noNamespaceSchemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://mgm-tp.github.io/perfload/schema/1.0/perfload-testplan.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;module&gt;</span>com.mgmtp.perfload.core.test.client.TestClientModule<span class="tag">&lt;/module&gt;</span>
    <span class="tag">&lt;loadProfile&gt;</span>fibonacci.perfload<span class="tag">&lt;/loadProfile&gt;</span>
    <span class="tag">&lt;testJars&gt;</span>
        <span class="tag">&lt;testJar&gt;</span>driver-example-1.0.0.jar&quot;<span class="tag">&lt;/testJar&gt;</span>
    <span class="tag">&lt;/testJars&gt;</span>
<span class="tag">&lt;/testplan&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analyzing_perfalyzer_reports"><a class="link" href="#_analyzing_perfalyzer_reports">7. Analyzing perfalyzer Reports</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>To be filled with life. Please bear with us&#8230;</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_downloads"><a class="link" href="#_downloads">8. Downloads</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>All perfLoad artifacts and distributions are available on Maven Central:</p>
</div>
<div class="paragraph">
<p><a href="http://search.maven.org/#search|ga|1|g:com.mgmtp.perfload">http://search.maven.org/#search|ga|1|g:com.mgmtp.perfload</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://search.maven.org/remotecontent?filepath=com/mgmtp/perfload/perfload-console/4.8.0-beta-1/perfload-console-4.8.0-beta-1-dist.zip">Console 4.8.0-beta-1</a></p>
</li>
<li>
<p><a href="http://search.maven.org/remotecontent?filepath=com/mgmtp/perfload/perfload-client/4.8.0-beta-1/perfload-client-4.8.0-beta-1-dist.zip">Client 4.8.0-beta-1</a></p>
</li>
<li>
<p><a href="http://search.maven.org/remotecontent?filepath=com/mgmtp/perfload/perfload-daemon/4.8.0-beta-1/perfload-daemon-4.8.0-beta-1-dist.zip">Daemon 4.8.0-beta-1</a></p>
</li>
<li>
<p><a href="http://search.maven.org/remotecontent?filepath=com/mgmtp/perfload/perfload-supervisor/1.9.1/perfload-supervisor-1.9.1-dist.zip">Supervisor 1.9.1</a></p>
</li>
<li>
<p><a href="http://search.maven.org/remotecontent?filepath=com/mgmtp/perfload/perfload-agent/1.3.0/perfload-agent-1.3.0.jar">Agent 1.3.0</a></p>
</li>
<li>
<p><a href="http://search.maven.org/remotecontent?filepath=com/mgmtp/perfload/perfload-perfmon/2.3.0-beta-1/perfload-perfmon-2.3.0-beta-1-dist.zip">perfMon 2.3.0-beta-1</a></p>
</li>
<li>
<p><a href="http://search.maven.org/remotecontent?filepath=com/mgmtp/perfload/perfload-loadprofiles/1.1.0/perfload-loadprofiles-1.1.0-dist.zip">Load Profile Configurator 1.1.0</a></p>
</li>
<li>
<p><a href="http://search.maven.org/remotecontent?filepath=com/mgmtp/perfload/perfload-perfalyzer/1.0.0-beta-1/perfload-perfalyzer-1.0.0-beta-1-dist.zip">perfAlyzer 1.0.0-beta-1</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Maven Dependency for Load Test Driver Development</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>com.mgmtp.perfload.core<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>perfload-client<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>insert current version<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tips_and_tricks_for_load_testing"><a class="link" href="#_tips_and_tricks_for_load_testing">9. Tips and Tricks for Load Testing</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>To be filled with life. Please bear with us&#8230;</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_community"><a class="link" href="#_community">10. Community</a></h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_need_help"><a class="link" href="#_need_help">11. Need Help?</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Join the discussion list:</p>
</div>
<div class="paragraph">
<p><a href="https://groups.google.com/forum/?hl=de#!forum/perfload-discuss">https://groups.google.com/forum/?hl=de#!forum/perfload-discuss</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_found_a_bug"><a class="link" href="#_found_a_bug">12. Found a Bug?</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the Github issue tracker:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/mgm-tp/perfload/issues">https://github.com/mgm-tp/perfload/issues</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_want_to_get_involved"><a class="link" href="#_want_to_get_involved">13. Want to Get Involved?</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>We&#8217;ll be happy to accept pull requests. Here&#8217;s the list of Github repositories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>perfLoad Core (Console, client, and Daemon)
<a href="https://github.com/mgm-tp/perfload-core">https://github.com/mgm-tp/perfload-core</a></p>
</li>
<li>
<p>perfMon
<a href="https://github.com/mgm-tp/perfload-perfmon">https://github.com/mgm-tp/perfload-perfmon</a></p>
</li>
<li>
<p>Load Profile Editor
<a href="https://github.com/mgm-tp/perfload-loadprofiles">https://github.com/mgm-tp/perfload-loadprofiles</a></p>
</li>
<li>
<p>Agent
<a href="https://github.com/mgm-tp/perfload-agent">https://github.com/mgm-tp/perfload-agent</a></p>
</li>
<li>
<p>perfAlyzer
<a href="https://github.com/mgm-tp/perfload-perfalyzer">https://github.com/mgm-tp/perfload-perfalyzer</a></p>
</li>
<li>
<p>Logging Library
<a href="https://github.com/mgm-tp/perfload-logging">https://github.com/mgm-tp/perfload-logging</a></p>
</li>
<li>
<p>Supervisor
<a href="https://github.com/mgm-tp/perfload-supervisor">https://github.com/mgm-tp/perfload-supervisor</a></p>
</li>
<li>
<p>Reference Application
<a href="https://github.com/mgm-tp/perfload-ref-app">https://github.com/mgm-tp/perfload-ref-app</a></p>
</li>
<li>
<p>Demo
<a href="https://github.com/mgm-tp/perfload-demo">https://github.com/mgm-tp/perfload-demo</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>